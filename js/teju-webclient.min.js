!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,(function(e){return r(t[a][1][e]||e)}),d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){const{log:i}=e("../utils/logging"),{hasFlag:r}=e("../utils/env"),{getRandomInt:o}=e("../utils/random"),a={custom:e("./providers/custom"),didna:e("./providers/didna"),nxt:e("./providers/nxt"),dailymotion:e("./providers/dailymotion"),bridoutstream:e("./providers/bridoutstream"),htl:e("./providers/htl"),aniview:e("./providers/aniview"),exco:e("./providers/exco"),revcontenthousead:e("./providers/revcontenthousead")};function s(e){return a[e.type]}t.exports={getBlockProviders:function(e){return r("adprovider")&&e.adProviders&&e.adProviders[0]&&(e.adProviders[0].approximateDisplayPercentage=100),e.adProvider||e.adProviders?function(e){return e.filter((e=>{const t=e.approximateDisplayPercentage,n=isNaN(t)?100:t,r=o(100),a=r<=n;return a||i("ad provider",e.type,"was randomly removed",r),a}))}(e.adProviders||[e.adProvider]):[]},createAdElement:function(e,t,n,i){return s(t).createElement(e,t,n,i)},createAdScript:function(e,t,n){return s(t).createScript(e,t,n)},getProviderExecutable:function(e){return s(e).execute}}},{"../utils/env":63,"../utils/logging":71,"../utils/random":74,"./providers/aniview":2,"./providers/bridoutstream":3,"./providers/custom":4,"./providers/dailymotion":5,"./providers/didna":6,"./providers/exco":7,"./providers/htl":8,"./providers/nxt":9,"./providers/revcontenthousead":10}],2:[function(e,t,n){const{debug:i}=e("../../utils/logging"),r="aniviewscriptcontainer";t.exports={createElement:function(e,t){const n=t.videoContainerWidth||350;return`<div id="${r}" style="width: ${n}px;"></div>`},createScript:function(){return""},execute:function({provider:e,window:t,next:n,visible:o,click:a}){let s=!1;function l(e,r){return function(){s||(s=!0,i("aniview event",e),r&&r.close(),function(e,t){"AdError"===e&&t.hindsightAdEvents&&t.hindsightAdEvents.push("aniview-failed")}(e,t),n())}}const c="hindsightaniviewconfigoverride";t[c]=e=>{t.aniviewkeywords&&(e.ref1=`AV_KEYWORDS=${t.aniviewkeywords}`)};const d="hindsightaniviewcallback";t[d]=(e,t)=>{i("aniview player ready"),t.on("AdImpression",o),t.on("AdClickThru",a),t.on("AdVideoComplete",l("AdVideoComplete",t)),t.on("AdError",(e=>{e&&e.errorlimit&&l("AdError",t)()})),t.on("AdSkipped",l("AdSkipped",t)),t.on("AdStopped",l("AdStopped",t)),t.on("AdClosed",l("AdClosed",t))};const u=`https://tg1.aniview.com/api/adserver/spt?AV_TAGID=${e.tagId}&AV_PUBLISHERID=${e.publisherId}`,g=t.document.createElement("script");g.setAttribute("id","AV"+e.tagId),g.setAttribute("async",""),g.setAttribute("src",u),g.setAttribute("data-config-api",c),g.setAttribute("data-player-api",d),t.document.querySelector("#"+r).appendChild(g),g.onload=()=>{i("aniview script loaded")},g.onerror=l("aniview script load error")}}},{"../../utils/logging":71}],3:[function(e,t,n){const{window:i}=e("../../utils/window"),{debug:r}=e("../../utils/logging"),{trackVisibility:o,trackPageVisibility:a}=e("../../utils/tracking");t.exports={createElement:function(e,t,n,i){return`\n    <div id="hindsightbrid" class="brid" style="width: ${i?300:400}px; height: ${i?250:300}px;"></div>\n    <div id="hindsightbrid2" class="brid" style="width: ${i?300:400}px; height: ${i?250:300}px;"></div>\n  `},createScript:function(){return["<script type='text/javascript' src='https://services.brid.tv/player/build/brid.outstream.min.js'><\/script>"].join("")},execute:function({provider:e,window:t,mobile:n,next:s,visible:l,click:c}){return(i.screen.width>767||!i.navigator.getBattery?Promise.resolve():i.navigator.getBattery().then((e=>{if(e.level<.02)throw new Error("battery is low, outstream will not play")}))).then((()=>function(e){const t=Date.now();return new Promise(((n,i)=>{setInterval((()=>e.$bos?n(e.$bos):Date.now()-t>3e3&&(r("brid.tv outstream library load timed out"),i(new Error("library load timed out")))),5)}))}(t))).then((i=>{if(!i)return s();let d,u,g=!1;const p=t.document.getElementById("hindsightbrid").parentElement,f={id:String(e.player_id||""),width:n?300:400,height:n?250:300};r("will render brid.tv outstream",f.id);const h=Date.now();try{i("hindsightbrid2",f,(function(){r("brid.tv outstream ready"),clearInterval(m),d=this,d.on("adImpression",l),d.on("adClicked",c),d.on("end",y("end")),d.on("ended",y("ended")),d.on("playbackerror",y("playbackerror")),d.on("adError",y("adError")),d.on("adComplete",y("adComplete")),d.on("adSkip",y("adSkip")),d.tag.addEventListener("suspend",y("suspend")),u=o(p,b),a(b),d.on("pause",(()=>{g&&y("paused&visible")()}))}))}catch(e){r("brid.tv outstream ERROR",e)}const m=setInterval((()=>{const t=Date.now()-h,n=e.timeout||5e3;t>n&&(r("brid.tv outstream TIMEOUT",t,n),s(),clearInterval(m))}),5);function y(e){return function(...t){r("bridoutstream event "+e),r(...t),u&&u.unobserve(p),s()}}function b(e){if(!d)return;g=e;const t=e?"play":"pause";r("visible: "+e+" brid outstream "+t),d[t]()}return null})).catch((e=>{r("brid.tv outstream ERROR",e),s()}))}}},{"../../utils/logging":71,"../../utils/tracking":80,"../../utils/window":81}],4:[function(e,t,n){t.exports={createElement:function(e,t){return t.element||""},createScript:function(e,t){return t.script||""}}},{}],5:[function(e,t,n){const{debug:i}=e("../../utils/logging"),{whenVisible:r,trackVisibility:o,trackPageVisibility:a}=e("../../utils/tracking");t.exports={createElement:function(e,t,n,i){return`\n    <div style="width: ${i?320:400}px; height: ${i?250:300}px;">\n      <div id="player"></div>\n    </div>\n  `},createScript:function(){return'<script src="https://api.dmcdn.net/all.js"><\/script>'},execute:function({provider:e,window:t,mobile:n,next:s,visible:l,click:c}){let d,u,g,p;return function(e){const t=Date.now();return new Promise(((n,r)=>{setInterval((()=>e.DM?n(e.DM):Date.now()-t>1e3&&(i("dailymotion library load timed out"),r(new Error("library load timed out")))),10)}))}(t).then((f=>{const h=t.document.getElementById("player");if(!h)return;const m=h.parentElement;e.autoplay&&(e.playOnlyWhenVisible=!1);let y=!e.playOnlyWhenVisible;n&&e.lazy&&(y=!0);const b=f.player(h,{playlist:e.playlist||"x771qa",width:"100%",height:"100%",params:{autoplay:y,mute:!0,syndication:279419}});function w(){u||l(),clearInterval(d),u=!0,i("dailymotion video started")}function v(e){if(!g)return i("dailymotion first visibility tracking",e),void(p=e);e?(i("dailymotion play"),b.play()):(i("dailymotion pause"),b.pause())}let x;function k(){const t=Date.now();i("dailymotion will start timeout check"),d=setInterval((()=>{const n=Date.now()-t,r=e.timeout||5e3;n>r&&(s(),clearInterval(d),i("dailymotion TIMEOUT",n,r),b.destroy("player"),x&&x.unobserve(m))}),5)}b.addEventListener("apiready",(()=>{i("dailymotion player init"),g=!0,b.addEventListener("ad_loaded",w),b.addEventListener("video_start",w),b.addEventListener("ad_click",c),!y&&p&&(i("dailymotion player initial play"),b.play())})),e.playOnlyWhenVisible&&(x=o(m,v)),y?k():r(m,{},k),a(v)}))}}},{"../../utils/logging":71,"../../utils/tracking":80}],6:[function(e,t,n){const{getRandomInt:i}=e("../../utils/random"),{getHostName:r,getURL:o}=e("../../utils/env"),{containerWindow:a}=e("../../utils/window"),{inContainer:s}=e("../../utils/containers");t.exports={createElement:function(e,t,n){if(4===t.version){return`<div id="${t.adSize||t.adSizes?"rectangle_hs":"rectangle"}_{{id}}" style="${n}"></div>`}return`<div id="${t.tagId||"rectangle_1"}" style="${n}"></div>`},createScript:function(e,t,{mobile:n,articleBody:l,adContainers:c}){let d="";return t.tcfapiScript&&(d+="\n    <script>\n      if (window.top.__tcfapi) {\n        window.__tcfapi = function(a, b, c, d) {\n          return window.top.__tcfapi(a, b, c, d);\n        }\n      }\n    <\/script>\n  "),t.targetingParams&&(d+=function(e,t){const n=t?"window.parent.parent.googletag":"window.googletag";return e.map((e=>`\n      <script>\n        (function () {\n          const googletag = ${n} || {cmd: []};\n          window.didna = window.didna || {cmd: []};\n          googletag.cmd.push(function(){\n            let param = googletag.pubads().getTargeting("${e}");\n            param = ((param || [])[0] || "").toLowerCase();\n            didna.cmd.push(function(){\n              if (param) {\n                didna.setTargeting("${e}", param);\n              }\n            });\n          });\n        })();\n      <\/script>\n    `)).join("")}(t.targetingParams,!s(a))),4===t.version?(d+='\n    <script>\n      (function () {\n        window.googletag = window.googletag || {cmd: []};\n        window.googletag.cmd.push(function() {\n          window.googletag.pubads().addEventListener("slotRenderEnded", (event) => {\n            if (event.isEmpty == true) {\n              console.log("[Hindsight] didna ad slotRenderEnded event is empty");\n              (window.hindsightAdEvents || window.parent.hindsightAdEvents || []).push("emptyad");\n            }\n          });\n        });\n      })();\n    <\/script>\n  ',d+=function(e,t,n){let i="";if(t.slot&&(t.adSize||t.adSizes)){let e=t.slot;e.includes("{domain}")&&(e=e.replace("{domain}",r()));const a=t.adSize||[300,250];let s=`[[${a[0]}, ${a[1]}]]`;t.adSizes&&(s=t.adSizes);const l=function(){const e=o().split("?")[1],t=new URLSearchParams(e);if("tsm"!==t.get("influencer"))return null;const n=t.get("utm_campaign");if(!n)return null;return{"tsm-campaign":n}}(),c=l?`targeting: ${JSON.stringify(l)}`:"";i+=n.map(((t,n)=>`\n        <script>\n          var didna = window.didna || {};\n          didna.cmd = didna.cmd || [];\n          didna.cmd.push(function(){\n            didna.createAdUnits({\n              id: "rectangle_hs_${n+1}",\n              adUnitPath: "${e}",\n              size: ${s},\n              ${c}\n            });\n          });\n        <\/script>\n      `)).join("")}const a="https://storage.googleapis.com/didna_hb/hindsight/didna_config.js";return i+=`\n    <script src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"><\/script>\n    <script src='${t.config||a}'><\/script>\n  `,i}(0,t,c)):"related_content"===e.type?d+=function(e,t,n){const o=t.tagId||"rectangle_1";let a=e.adSizes||"[[300,250]]",s=`googletag.sizeMapping().addSize([400,0], ${a}).addSize([0,0], ${a}).build()`;n&&(a=e.adSizes||"[[320,50]]",s=`googletag.sizeMapping().addSize([300,0],${a}).build()`);const l=t.config||"https://storage.googleapis.com/didna_hb/hindsight/didna_config.js";return`\n    <script src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"><\/script>\n    <script src='${l}'><\/script>\n    <script>\n      var didna = window.didna||{};\n      didna.cmd = didna.cmd||[];\n      didna.cmd.push(function(){\n        var mapping_rect = ${s};\n        var adUnits = [{\n            adUnitPath: '${t.slot}',\n            id: '${o}',\n            size: ${a},\n            sizeMap: mapping_rect,\n            targeting: {'auid': '${o}'}\n        }];\n        googletag.pubads().setCentering(true);\n        googletag.pubads().setTargeting ('hindsightURL', '${r()}');\n        googletag.pubads().setTargeting('hindsightKeyword', '');\n        googletag.pubads().setTargeting('pos', '${i(1e3)}');\n        didna.createAdUnits(adUnits);\n      });\n    <\/script>\n  `}(e,t,n):d+=function(e,t,n,o){const a=t.tagId||"rectangle_1",s=function(e,t){if(t&&e){const n=t.filter((t=>e.offsetWidth>=t[0]));return n.length>0?n:[t[t.length-1]]}return[[300,250]]}(o,e.adSizes),l="\n    var mapping_rect = googletag.sizeMapping()\n      .addSize([400,0],[[300,250]])  \n      .addSize([0,0],[[300,250]])  \n      .build();\n  ";return`\n    <script src='${t.config}'><\/script>\n    <script>\n      var didna = window.didna||{};\n      didna.cmd = didna.cmd||[];\n      var diDNA_Keyword = '';\n      didna.cmd.push(function(){\n        ${e.adSizes?"":l}\n        var adUnits = [{\n          adUnitPath: '${t.slot}',\n          id: '${a}',\n          size: ${JSON.stringify(s)},\n          ${e.adSizes?"":"sizeMap: mapping_rect,"}\n          targeting: {'auid': '${a}'}\n        }];\n        googletag.pubads().setCentering(true);\n        googletag.pubads().setTargeting ('hindsightURL', '${r()}');\n        googletag.pubads().setTargeting('hindsightKeyword', '');\n        googletag.pubads().setTargeting('pos', '${i(1e3)}');\n        didna.createAdUnits(adUnits);\n      });\n    <\/script>\n  `}(e,t,0,l),t.expID&&(d+=function(e,t){const n=["in_paragraph_only_ad","related_content"];let i=n.findIndex((t=>t===e))+1;i=i||n.length+1;return`\n    <script>\n      var didna = window.didna || {cmd:[]};\n      didna.cmd.push(function(){\n        didna.setTargeting("expID", "${"string"==typeof t?t:`00000${i}`}");\n      });\n    <\/script>\n  `}(e.type,t.expID)),d}}},{"../../utils/containers":60,"../../utils/env":63,"../../utils/random":74,"../../utils/window":81}],7:[function(e,t,n){const{debug:i}=e("../../utils/logging");function r(e){return e.playerId||"fd04fa5d-c1e2-4ff2-b748-59a7748c1eae"}t.exports={createElement:function(e,t){return`<div id="${r(t)}" style="width: 350px;"></div>`},createScript:function(){return"<div id='exco-script-container'></div>"},execute:function({provider:e,window:t,next:n,visible:o}){let a=!1;function s(e){a||(i("exco event",e),a=!0,n())}const l=setTimeout((()=>{s("exco provider timeout")}),e.timeout||5e3);t.addEventListener("message",(e=>{if("exco-event"!==e.data.type)return;i("exco event",e);const{name:t,metadata:n}=e.data||{};"player-load"===t&&i(`exco player loaded with id: ${n.playerId}`),"ad-impression"===t&&(i("exco ad-impression"),clearTimeout(l),o());["ad-completed","player-closed","player-paused"].includes(t)&&s(t)}));const c=t.document.createElement("script");c.className="exco-player",c.setAttribute("src",`https://player.ex.co/player/${r(e)}`),t.document.querySelector("#exco-script-container").appendChild(c),c.onload=()=>{i("exco script loaded")},c.onerror=e=>{s("exco script load error"+e)}}}},{"../../utils/logging":71}],8:[function(e,t,n){const{getRandomInt:i}=e("../../utils/random"),{getHostName:r}=e("../../utils/env"),{hasFlag:o}=e("../../utils/env");function a(e){return`\n    <script>\n      hsbid = window.hsbid || {};\n      hsbid.cmd = hsbid.cmd || [];\n      hsbid.cmd.push(function() {\n        ${e}\n      });\n    <\/script>\n  `}t.exports={createElement:function(e,t,n){return`<div class='hsad-rectangle' style="${n}"></div>`},createScript:function(e,t){let n="";return o("htltest")&&(n+=a(`\n    googletag.cmd.push(function() {\n      googletag.pubads().set('page_url', 'https://${t.publisherId.replace("hs.","")}/');\n    });\n  `)),n+="\n    <script>\n      if (!window.__tcfapi && window.top.__tcfapi) {\n        window.__tcfapi = function(a, b, c, d) {return window.top.__tcfapi(a, b, c, d)}\n      }\n    <\/script>\n  ",n+=function(e,t){const n=`<script async src="https://htlbid.com/v3/${t.publisherId}/hsbid.js"><\/script>`,o=a(`\n    hsbid.layout('universal');\n    hsbid.setTargeting('hindsightURL', '${r()}');\n    hsbid.setTargeting('pos', '${i(1e3)}');\n  `);return n+o}(0,t),t.expID&&(n+=function(e,t){const n=["in_paragraph_only_ad","related_content"];let i=n.findIndex((t=>t===e))+1;i=i||n.length+1;return a(`hsbid.setTargeting("expID", "${"string"==typeof t?t:`00000${i}`}");`)}(e.type,t.expID)),n}}},{"../../utils/env":63,"../../utils/random":74}],9:[function(e,t,n){t.exports={createElement:function(e,t,n){return`<div id="hindsight-nxt" style="${n}"></div>`},createScript:function(){return"\n    <script>\n      var a= document.createElement('script');a.src = 'https://powerad.ai/script.js';top.document.querySelector('head').appendChild(a);\n    <\/script>\n  "}}},{}],10:[function(e,t,n){t.exports={createElement:function(){return'<div id="widget-pl-271989"\n    data-widget-placement\n    data-widget-host="habitat"\n    data-endpoint="trends.revcontent.com"\n    data-widget-id="271989"\n    data-banner-size="300x250"\n    style="width: 300px; height: 250px;"\n  ></div>'},createScript:function(){return'<script src="https://assets.revcontent.com/master/delivery.js" defer="defer"><\/script>'}}},{}],11:[function(e,t,n){const{createAdElement:i,createAdScript:r,getProviderExecutable:o,getBlockProviders:a}=e("./factory"),{log:s,debug:l}=e("../utils/logging"),{whenVisible:c}=e("../utils/tracking"),{insertHTMLAndExecuteScripts:d}=e("../utils/html"),{toInlineCss:u}=e("../utils/css"),{getRandomInt:g}=e("../utils/random"),p=e("../events/events-logger");function f(e,t,n,a,u,m,y){const{mobile:b}=t;function w(){return e.frameElement?e.frameElement.remove():null}0===a.length&&("related_content"===n.type&&0===n.articleLimit&&w(),"in_paragraph_only_ad"===n.type&&w());const v=a[u];if(!v)return;const x=e.document;let k=function(e,t){let n=t.adContainers?e.querySelectorAll(t.adContainers):[];const i=n[0]||e.querySelector(t.adContainer);return n=n.length?n:[i],Array.from(n).filter(Boolean)}(x,t),C=[x.querySelector(t.scriptContainer)];if(0===k.length)return void l("WARNING: no ad containers found");if(v.lazy)return s("will be lazy loaded",v.type),v.lazy=!1,void c(k[0],{margin:v.lazyMargin},(()=>{f(...arguments)}));s("running ad number",u+1,v.type),k.forEach((e=>{e.innerHTML=""})),C.forEach((e=>{e.innerHTML=""}));const _=()=>{u=v.restart?0:u+1,s("will run next ad"),f(...arguments)},$={refresh(){},renderNextAd:_,hideUnit:w,hideAdContainer(){x.querySelector(t.adBlock).style.display="none"},replaceUnit({applyRenderingFallback:t,htmlContent:i}){if(e.frameElement&&e.parent){const r=e.parent,o=r.document.createElement("div");e.frameElement.parentNode.replaceChild(o,e.frameElement);const a=v.isolatedAdDimensions||[300,250],{adContainer:s}=h(r,o,a,g(1e3)),l=t?n.renderingFallback:i;d(s,l)}},displayAlternativeRecommender(){const e=x.querySelectorAll(`[recommender='${n.mainRecommender}']`),t=x.querySelectorAll(`[recommender='${n.alternativeRecommender}']`);if(e.length&&t.length){for(const t of e)t.style.display="none";for(const e of t)e.style.display="block"}},changeRelatedContentTitle({newTitle:e}){e&&(x.querySelector("#rc-title").innerHTML=e)},logEvent(e,t){p.log("ad-event",y,{value:t})}};function A(e,t){if(e){e=Array.isArray(e)?e:[e];for(const n of e){const e=n.action||n;$[e]&&$[e](n,t)}}}const I=Object.assign({},{emptyad:"renderNextAd"},v.externalEvents);e.hindsightAdEvents={push(e,t){const n=I[e];s(`received external ad event "${e}", maps to actions:`,n),A(n,t)}};const E=[];v.isolatedAd&&(C=[],k=k.map(((t,n)=>{const i=v.isolatedAdDimensions||[300,250],r=h(e,t,i,n);return r.window.hindsightAdEvents=e.hindsightAdEvents,C.push(r.scriptContainer),E.push(r),r.adContainer})));let S=i(n,v,t.containerStyle,b);const T=r(n,v,{mobile:b,articleBody:m,adContainers:k});for(const e of v.includeContextualData||[]){const t=y.get(e.contextualData);if(t){const n=e.includeAs||e.contextualData,i=`<script>window.${n} = "${t}";<\/script>`;S=i+S;for(const e of E)e.window[n]=t;s("ad contextual data included",i)}else e.whenUnavailable&&(s(`ad contextual data "${e.contextualData}" unavailable`),A(e.whenUnavailable))}if(v.independent)return void function({window:e,mobile:t,elements:n,script:i}){const r=e.frameElement,o=e.document.body.firstElementChild,a=r.parentElement;if("wrapper"!==a.getAttribute("hindsight"))return;let s=r.style.cssText;const l=["border","border-radius","box-shadow"];for(const e of l)s+=e+":"+o.style[e]+"!important;",o.style[e]="";const c=r.style["margin-bottom"]||"0px!important";r.style.cssText+="margin-bottom: 0px!important;",s+="display: flex!important; height: max-content!important;"+c,a.style.cssText=s;const u=e.document.createElement("div");u.style.cssText="margin: 5px; width: 330px; font-family: sans-serif;",a.appendChild(u);const g=e.document.querySelector("#ad-container");u.innerHTML=g.outerHTML,a.querySelector("#ad-title").style.margin="0px",t?(a.style["flex-direction"]="column",a.style["align-items"]="center",u.style.width="300px"):r.style.width=r.offsetWidth-330+"px";g.style.display="none",u.querySelector("#ad").innerHTML=n.replace("{{id}}",1);const p=e.parent.document.createElement("div");p.id="hindsight-ads",e.parent.document.head.appendChild(p),d(p,i)}({window:e,mobile:b,elements:S,script:T});function P(){l("disabled event: user-viewed-ad",{unit:n.type,demand:v.type})}function L(){l("disabled event: user-clicked-ad",{unit:n.type,demand:v.type})}k.forEach(((e,t)=>{d(e,S.replace("{{id}}",t+1))})),C.forEach((e=>{d(e,T)})),e.frameElement&&e.frameElement.setAttribute("ad",v.type);const O=o(v);if(O)O({provider:v,window:e,mobile:b,visible:P,click:L,next:_});else{c(k[0].firstElementChild,{},P);for(const e of k)e.addEventListener("mousedown",L);v.timeout&&(s("will run next ad in",v.timeout/1e3,"seconds"),setTimeout(_,v.timeout))}}function h(e,t,n,i){const[r,o]=n,a={height:o,width:r,display:"block",margin:"0 auto",border:0};let s=e.document.createElement("iframe");s.id=`hindsight-isolated-ad-${i}`,s.setAttribute("style",u(a)),t.appendChild(s),s=e.document.querySelector(`#${s.id}`),s=s.contentWindow||s.contentDocument.document||s.contentDocument;const l=s.document.body;return l.setAttribute("style","margin: 0; overflow: hidden;"),l.innerHTML=`\n    <div id="isolatedAdContainer" style="${u({height:o,width:r})}"></div>\n    <div id="isolatedScriptContainer"></div>\n  `,{window:s,adContainer:l.querySelector("#isolatedAdContainer"),scriptContainer:l.querySelector("#isolatedScriptContainer")}}t.exports={renderBlockAds:function(e,t,n,i,r){f(t,n.ad,e,a(e),0,i,r)}}},{"../events/events-logger":27,"../utils/css":61,"../utils/html":67,"../utils/logging":71,"../utils/random":74,"../utils/tracking":80,"./factory":1}],12:[function(e,t,n){const{getEndpoint:i,createQueryString:r}=e("./utils");t.exports={getArticleContextual:function({env:e,publisherId:t,articleId:n}){const o={publisher_id:t,article_external_id:n},a=i("articles",e)+"?"+r(o);return fetch(a).then((e=>e.json()))}}},{"./utils":20}],13:[function(e,t,n){const{getEndpoint:i}=e("./utils");t.exports={upload:function(e,t,n,r,o=!1,a="upload"){const s=i(a,e),l={url:t,content:n,publisher_id:r,reimport:o};return fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}}},{"./utils":20}],14:[function(e,t,n){const{getAssetsURL:i}=e("./utils");t.exports={getStaticConfig:function(e,t,n){let r=`${i(e)}/assets/${btoa(t)}`;return n&&(r=`${r}?cachebuster=${(new Date).getTime()}`),fetch(r).then((e=>e.json())).then((e=>e)).catch((()=>null))}}},{"./utils":20}],15:[function(e,t,n){const{getEndpoint:i}=e("./utils"),{getEnv:r}=e("../utils/env");t.exports={sendEvents:function(e){const t=i("events",r()),n={events:e};return fetch(t,{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}}},{"../utils/env":63,"./utils":20}],16:[function(e,t,n){const{getEndpoint:i}=e("./utils"),{getEnv:r}=e("../utils/env");t.exports={sendLogs:function(e){const t=i("logs",r()),n={logs:e},o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(n))}}},{"../utils/env":63,"./utils":20}],17:[function(e,t,n){const{getEndpoint:i}=e("./utils");t.exports={onboardPublisher:function(e,t,n,r,o){const{network_api_key:a,network_id:s}=o,l={url:t,site_name:n||null,network_id:s,network_api_key:a};r&&(l.site_identifier=r);const c=i("onboard",e);return fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}}},{"./utils":20}],18:[function(e,t,n){function i(e,t){const n=e.indexOf(t);return n>0&&n<30?e.slice(n+t.length):e}t.exports={getNordotFeed:async function(e){const t=await function(e){return new Promise(((t,n)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.send(null),i.onreadystatechange=()=>{4===i.readyState&&(200!==i.status?n(new Error("failed to get XML")):t(i.responseXML))}}))}(e);return Array.from(t.querySelectorAll("item")).filter((e=>{const t=e.getElementsByTagName("nordot:visible");return!t||!t.length||"false"!==(t[0].textContent||"").toLowerCase()})).map((e=>e.querySelector("description")?function(e){let t=e.querySelector("description").textContent||"";t=i(t,"â€”"),t=i(t,") -");let n=e.getElementsByTagName("media:thumbnail");n&&n.length&&(n=n[0].getAttribute("url"));return{title:e.querySelector("title").textContent,url:e.querySelector("guid").textContent,description:t,media:n,publisher:e.getElementsByTagName("dc:creator")[0].textContent}}(e):function(e){let t=e.getElementsByTagName("media:thumbnail");t&&t.length&&(t=t[0].getAttribute("url"));let n=e.getElementsByTagName("nordot:sourceUrl");n&&n.length&&(n=n[0].textContent);return{title:e.querySelector("title").textContent,url:n,description:"",media:t,publisher:""}}(e)))}}},{}],19:[function(e,t,n){const{getEndpoint:i,createQueryString:r}=e("./utils");t.exports={getRecommendations:function({env:e,publisherId:t,articleId:n}){const o={publisher_id:t,url:n},a=i("recommendations",e)+"?"+r(o);return fetch(a).then((e=>e.json())).then((e=>{if("error"===e.message)throw new Error(JSON.stringify(e));if(Array.isArray(e.data))for(const t of e.data)t.related_articles=t.related_data,delete t.related_data;return e}))}}},{"./utils":20}],20:[function(e,t,n){t.exports={getEndpoint:function(e,t){const n={articles:{domain:"api2",version:1,path:"/articles"},events:{domain:"funes",version:null,path:"/events/_bulk"},logs:{domain:"api",version:2,path:"/logs/_bulk"},onboard:{domain:"api2",version:1,path:"/onboard"},upload:{domain:"api2",version:1,path:"/ingest_page"},recommendations:{domain:"api2",version:2,path:"/get_recommendations"},import:{domain:"api2",version:2,path:"/import_article_by_content"}},{path:i}=n[e];let{domain:r,version:o}=n[e];return"STAGING"===t&&"api2"===r&&(r="api"),o=o?`/v${o}`:"",`https://${"STAGING"===t?"staging-":""}${r}.solutionshindsight.net${o}${i}`},getAssetsURL:function(e){return"STAGING"===e?"https://static-staging.solutionshindsight.net":"https://static.solutionshindsight.net"},createQueryString:function(e){return Object.keys(e).filter((t=>e[t]||"boolean"==typeof e[t])).map((t=>t+"="+function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return encodeURIComponent(e)}}(e[t]))).join("&")}}},{}],21:[function(e,t,n){const{ExecutionContext:i}=e("./execution"),{PublisherContext:r}=e("./publisher"),{ArticleContext:o}=e("./article"),{BlockContext:a}=e("./block");t.exports={ExecutionContext:i,PublisherContext:r,ArticleContext:o,BlockContext:a}},{"./article":22,"./block":24,"./execution":25,"./publisher":26}],22:[function(e,t,n){const{Context:i}=e("./base");t.exports={ArticleContext:class ArticleContext extends i{parentContextName="PublisherContext";initialState={articleId:"",body:null,contextualInfo:null,adsBlocked:!1};mutable=["contextualInfo","adsBlocked"];required=["articleId"];constructor(e,t){super(),this.initialize(t,e)}getters={classificationLabel(e){const t=((e.get("contextualInfo")||{}).data||[]).find((e=>"classification"===e.type));let n=t&&t.label||"";return n="none"===n.toLowerCase()?"":n,n},title:e=>(e.get("contextualInfo")||{}).title||""}}}},{"./base":23}],23:[function(e,t,n){const{hasFlag:i}=e("../utils/env"),{log:r}=e("../utils/logging");function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports={Context:class Context{parentContextName="";initialState={};mutable=[];__parentContext=null;__state={};__mutated=[];required=[];initialize(e={},t=null){this.parentContextName&&(t||this.fail(`requires a parent context of type ${this.parentContextName}`),this.parentContextName!==t.constructor.name&&this.fail(`got wrong parent context type: ${t.constructor.name}`),this.__parentContext=t);for(const t of this.required)o(e,t)&&void 0!==e[t]||this.fail(`missing required data: ${t}`);for(const e of Object.keys(this.initialState))t&&t.has(e)&&this.fail(`tried to overwrite parent context key ${e}`),this.__state[e]=this.initialState[e];for(const t of Object.keys(e))o(this.initialState,t)?this.__state[t]=e[t]:this.fail(`got undeclared initial data key: ${t}`);i("ctx")&&r(this.constructor.name,"initialized",this.__state)}get(e){return this.__parentContext&&this.__parentContext.has(e)?this.__parentContext.get(e):this.getters&&this.getters[e]?this.getters[e](this):(this.has(e)||this.fail(`got undeclared key ${e}`),this.__state[e])}set(e,t){o(this.initialState,e)||this.fail(`set on undeclared key ${e}`),this.mutable.includes(e)||this.fail(`set on immutable key ${e}`),this.__mutated.includes(e)&&this.fail(`set twice on key ${e}`),this.__state[e]=t,this.__mutated.push(e),i("ctx")&&r(this.constructor.name,"set",e,t)}has(e){return!(!this.__parentContext||!this.__parentContext.has(e))||(!(!this.getters||!o(this.getters,e))||o(this.__state,e))}fail(e){throw new Error(`${this.constructor.name}: ${e}`)}}}},{"../utils/env":63,"../utils/logging":71}],24:[function(e,t,n){const{Context:i}=e("./base");t.exports={BlockContext:class BlockContext extends i{parentContextName="ArticleContext";initialState={block:null,data:null,positioningTargets:[],appliedExperiment:null};mutable=["data","positioningTargets","appliedExperiment"];required=["block"];constructor(e,t){super(),this.initialize(t,e)}}}},{"./base":23}],25:[function(e,t,n){const{Context:i}=e("./base"),{window:r}=e("../utils/window"),{createGUID:o}=e("../utils/random"),{getEnv:a,getURL:s,getHostName:l,getDevice:c}=e("../utils/env");t.exports={ExecutionContext:class ExecutionContext extends i{parentContextName="";initialState={library:"",sessionId:"",sessionStartTime:0,env:"",url:"",domain:"",device:"",agent:"",container:null};mutable=[];required=["library"];constructor({library:e,container:t}){super();const n={library:e,container:t,sessionId:o()+"-"+Date.now(),sessionStartTime:(new Date).getTime(),env:a(),url:s(),domain:l(),device:c(),agent:r.navigator.userAgent||null};this.initialize(n)}}}},{"../utils/env":63,"../utils/random":74,"../utils/window":81,"./base":23}],26:[function(e,t,n){const{Context:i}=e("./base");t.exports={PublisherContext:class PublisherContext extends i{parentContextName="ExecutionContext";initialState={config:{},publisherId:"",publisherName:"",publisherFlags:[],contextualFlowVersion:1,networkId:""};mutable=[];required=["config","publisherId"];constructor(e,t={}){super();const n={config:t,publisherId:t.publisherId,publisherName:t.publisherName||"",publisherFlags:[],contextualFlowVersion:t.contextualFlowVersion||1,networkId:t.networkId||""},i=["errorReporting","doNotLogEvents","articleIngest","contextualFlowV2"];for(const e of i)t[e]&&n.publisherFlags.push(e);this.initialize(n,e)}getters={offlineResponse:e=>((e.get("config").blocks||[]).find((e=>e.offlineResponse))||{}).offlineResponse}}}},{"./base":23}],27:[function(e,t,n){const{funnel:i}=e("./funnel"),r=e("../utils/logging"),{logError:o}=e("../utils/error-logger"),{sendEvents:a}=e("../api-client/events");t.exports={log:function(e,t,n){const s=function(e){for(const t of i)if(t.event===e)return t;return null}(e);if(!s)throw new Error(`logging invalid event name: ${e}`);const l=function(e){const t=[];for(const n of i)if(n.context&&t.push(n),n.event===e)return t;return t}(e),c=l[l.length-1].context+"Context";if(t.constructor.name!==c)throw new Error(`${e} requires context ${c}, got ${t.constructor.name}`);const d=function(e,t){return e.reduce(((e,t)=>e.concat(t.data||[])),[]).reduce(((e,n)=>Object.assign(e,function(e,t){const[n,i]=e.split(" -> "),[r,o]=n.split(".");let a=t.get(r);if(o&&!a)return{};o&&a&&(a=a[o]);if(o&&!i)throw new Error("event in funnel using a nested accessor needs to declare a key using ->");const s=i||n;if(void 0===a)return{};return{[s]:a}}(n,t))),{})}(l,t),u=Object.assign({},n,d);var g;if(u.time=(g=t.get("sessionStartTime"),(new Date).getTime()-g),!1===s.enabled)return void r.log("logging disabled event",e,u);let p=[];if(t.has("publisherFlags")&&(p=t.get("publisherFlags")),p.includes("doNotLogEvents"))return void r.log("doNotLogEvents flag is set, just logging event",e,u);if(t.has("articleId")&&(t.get("articleId")||"").startsWith("file:"))return void r.log("local file detected. logging disabled event",e,u);if(t.has("block")&&((t.get("block")||{}).disabledEvents||[]).includes(e))return void r.log("logging block disabled event",e,u);const f={name:e,timestamp:(new Date).toISOString(),data:{hindsight:u}};try{a([f])}catch(t){r.log("ERROR sending event",e,f,t),p.includes("errorReporting")&&o(t)}}}},{"../api-client/events":15,"../utils/error-logger":64,"../utils/logging":71,"./funnel":28}],28:[function(e,t,n){t.exports={funnel:[{context:"Execution",data:["library","sessionId -> trace_id","url","domain","device","agent"]},{enabled:!1,event:"browser-loaded-client"},{context:"Publisher",data:["publisherId -> publisher_id","networkId -> network_id"]},{enabled:!1,event:"client-loaded-config"},{context:"Article",data:["articleId -> article_id"]},{enabled:!0,event:"client-detected-opportunity"},{enabled:!1,event:"client-detected-direct_opportunity"},{enabled:!1,event:"client-received-api_success"},{enabled:!1,event:"client-received-api_error",data:["error"]},{enabled:!0,event:"article-imported",data:["got_related_content","retries","error"]},{context:"Block",data:["block.type -> unit","block.id -> unit_id","appliedExperiment.id -> experiment_id","data.call_to_action -> call_to_action_text","data.call_to_action_text -> call_to_action_text","data.call_to_action_text -> beauty_message","data.recommender_config_id -> related_config_id","data.rc_response_code -> rc_response_code"]},{enabled:!0,event:"unit-entered-viewport"},{enabled:!0,event:"user-clicked-related_content",data:["content"]},{enabled:!0,event:"user-clicked-unit",data:["link"]},{enabled:!1,event:"unit-exited-viewport",data:["duration"]},{enabled:!1,event:"user-viewed-ad",data:["demand"]},{enabled:!1,event:"user-clicked-ad",data:["demand"]},{enabled:!0,event:"ad-event",data:["value"]}]}},{}],29:[function(e,t,n){const{log:i,debug:r}=e("../utils/logging"),{getArticleParagraphs:o,getParagraphsAfterElement:a,getParagraphsAfterLastUnit:s}=e("../utils/paragraphs"),{getParagraphsByFrequency:l}=e("./paragraph-frequency"),{getParagraphsByCharacterFrequency:c}=e("./character-frequency"),{getParagraphAtCharacterCount:d}=e("./nth-character"),{getParagraphAtCharacterPercentage:u}=e("./character-percentage"),{getNthParagraph:g}=e("./nth-paragraph"),{getLastParagraph:p}=e("./last-paragraph"),{getFixedElement:f}=e("./fixed-element"),h={nth_paragraph:g,last_paragraph:p,paragraph_frequency:l,character_frequency:c,nth_character:d,character_percentage:u,fixed_element:f};function m(e,t){if(!e.positioning||0===e.positioning.length)return i(`WARNING: ${e.id||e.type} block has no positioning`),[];const n=e.positioning.reduce(((e,n)=>{const l=function(e,t){const n=h[t.type];if(!n)return i("WRONG: Positioning type not supported:",t.type);let l=[],c=[];"fixed_element"!==t.type&&(l=o(e,t),t.startElement&&(l=a(l,e.querySelector(t.startElement))),t.afterPreviousUnit&&(l=s(l)),c=l.filter((e=>e.valid)),i(c.length,"REAL paragraphs"),r("REAL paragraphs:",c));const d=n(t,{allParagraphs:l,paragraphs:c,body:e});i(d.length,"positioning elements found for",t.type),r("Positioning elements for",t.type,d);for(const e of d)e.hindsight_position=!0;return d}(t,n),c=l.map((e=>({target:e,positioning:n})));return e.concat(c)}),[]);return i(n.length,"total positioning elements found for",e.id||e.type),n}t.exports={setPositioningTargets:function(e){const t=m(e.get("block"),e.get("body"));if(e.set("positioningTargets",t),0===t.length){const t=e.get("block").id||e.get("block").type;i(t,"WILL NOT RENDER: no positioning elements")}return e},getAllTargets:function(e){return e.reduce(((e,t)=>e.concat(t.get("positioningTargets").map((({target:e})=>e)))),[])},filterWaterfallRendering:function(e,t,n){const r=e.get("block");if(!r.waterfallRendering)return!0;const o=n[t-1];return!o||0!==o.get("positioningTargets").length||(i(r.id||r.type,"WILL NOT RENDER: previous block didn't position (waterfall rendering)"),!1)}}},{"../utils/logging":71,"../utils/paragraphs":73,"./character-frequency":30,"./character-percentage":31,"./fixed-element":32,"./last-paragraph":33,"./nth-character":34,"./nth-paragraph":35,"./paragraph-frequency":36}],30:[function(e,t,n){const{getCharCount:i}=e("../utils/paragraphs");t.exports={getParagraphsByCharacterFrequency:function(e,{allParagraphs:t}){if(0===t.length||!e.every)return[];const n=e.start||0,r=e.end||1/0;let o=0,a=0;const s=[];for(const l of t){const t=i(l);if(o+=t,a+=t,o>=n&&(n&&o-t<n&&l.valid||a>=e.every&&o<=r&&l.valid)&&(s.push(l),a=0),e.limit&&s.length===e.limit)break}return s}}},{"../utils/paragraphs":73}],31:[function(e,t,n){const{getCharCount:i}=e("../utils/paragraphs"),{toDecimal:r}=e("../utils/math");t.exports={getParagraphAtCharacterPercentage:function(e,{allParagraphs:t}){if(0===t.length||!e.percentage)return[];const n=t.reduce(((e,t)=>e+i(t)),0),o=r(n*(e.percentage/100));let a=0;for(const e of t)if(a+=i(e),a>=o&&e.valid)return[e];return[]}}},{"../utils/math":72,"../utils/paragraphs":73}],32:[function(e,t,n){const{window:i,containerWindow:r}=e("../utils/window"),{getPublicExternalParameter:o}=e("../utils/library-api");t.exports={getFixedElement:function(e,{body:t}){let n;return"user-defined:hindsight_fixed_positioning"===e.selector&&(e.selector=o("hindsight_fixed_positioning")),e.inArticleBody?(n=(t||r.document).querySelector(e.selector),n?[n]:[]):(n=i.document.querySelector(e.selector),n?[n]:(n=r.document.querySelector(e.selector),n?[n]:[]))}}},{"../utils/library-api":70,"../utils/window":81}],33:[function(e,t,n){t.exports={getLastParagraph:function(e,{paragraphs:t}){const n=t[t.length-1];return n?[n]:[]}}},{}],34:[function(e,t,n){const{getCharCount:i}=e("../utils/paragraphs");t.exports={getParagraphAtCharacterCount:function(e,{allParagraphs:t}){if(0===t.length||!e.character)return[];let n=0;for(const r of t)if(n+=i(r),n>=e.character&&r.valid)return[r];return[]}}},{"../utils/paragraphs":73}],35:[function(e,t,n){t.exports={getNthParagraph:function(e,{paragraphs:t}){const n=e.paragraph-1||0;e.reverseOrder&&(t=t.reverse());const i=t[n];return i?[i]:[]}}},{}],36:[function(e,t,n){t.exports={getParagraphsByFrequency:function(e,{paragraphs:t}){let{start:n=1}=e;const{every:i=1,end:r,limit:o}=e;!e.start&&e.every&&(n=i);const a=[];let s=n-1;for(let e=0;e<t.length&&!(s>=t.length);e+=1)if(e===s){if(a.push(t[e]),o&&a.length===o)break;if(s+=i||1,r&&s>=r)break}return a}}},{}],37:[function(e,t,n){const i=e("../events/events-logger"),{log:r}=e("../utils/logging"),{createTrackers:o}=e("../trackers/factory"),{uploadArticle:a}=e("../services/article-upload"),{window:s,containerWindow:l}=e("../utils/window"),{hasFlag:c}=e("../utils/env"),d=e("../utils/tracking"),{createGUID:u}=e("../utils/random"),{setContainerAttributes:g}=e("../utils/containers"),{insertHTMLAndExecuteScripts:p,insertBefore:f,insertAfter:h}=e("../utils/html"),{getPublicExternalParameter:m}=e("../utils/library-api"),{createFonts:y,toInlineCss:b}=e("../utils/css"),{getSiteStyles:w}=e("../utils/site-styles"),{onImageFailed:v,loadImageFallback:x}=e("../utils/images"),{once:k}=e("../utils/functions");t.exports={renderAtPosition:function e(t,n,C,_){const $=t.get("block");if($.applyRenderingFallback&&$.renderingFallback){const[e,t]=$.renderingFallbackDimensions||[300,250],i={width:e,height:t,display:"block",margin:"0 auto",border:0};n={unit:"fallback-content",elementType:"iframe",body:$.renderingFallback,attributes:{style:b(i,!0)}}}let A=s.document.createElement(n.elementType),I=s,E=A;const S=u();A.setAttribute("id",`hindsight-ads-${n.elementType}`),A.setAttribute("hindsight",S),A.setAttribute("unit",n.unit||$.type),$.id&&A.setAttribute("unit_id",$.id);for(const e of Object.keys(n.attributes||{}))A.setAttribute(e,n.attributes[e]);let T=n.head||"",P=n.body||"";const L=d.createClickTracker(n.clickUrl);L&&(T=T.replace(n.clickUrl,L),P=P.replace(n.clickUrl,L)),$.trackers&&(T+=o($.trackers));const O=((m("hindsight_styles")||{})[$.type]||{}).fonts;if(O&&(T+=y(O)),$.inheritSiteStyles&&(T+=w($,C)),"before"===_?f(C,A):h(C,A),(($.adProviders||[])[0]||{}).independent){const e=s.document.createElement("div");e.setAttribute("hindsight","wrapper");const t=A.parentNode;t.appendChild(e),t.replaceChild(e,A),e.appendChild(A)}if("iframe"===n.elementType){const e=`iframe[hindsight='${S}']`;let t=s.document.querySelector(e)||l.document.querySelector(e);if(A=t,t=t.contentWindow||t.contentDocument.document||t.contentDocument,c("nowrite"))t.document.body.setAttribute("style","margin: 0; overflow: hidden;"),p(t.document.head,T),p(t.document.body,P);else{const e=`\n        <head>\n          ${T}\n        </head>\n        <body style="margin: 0; overflow: hidden;">\n          ${P}\n        </body>\n      `,n="write";t.document.open(),t.document[n](e),t.document.close()}I=t,E=t.document.body}if("div"===n.elementType&&p(A,T+P),$.resizeGAMContainer){const e=Object.assign({height:null,width:null},n.attributes);g(l,e,$.resizeGAMContainerParents)}if(n.trackViews&&d.whenVisible(A,{},(()=>{i.log("unit-entered-viewport",t)})),$.conditionalVisibility&&d.trackConditionalVisibility($.conditionalVisibility.selector,A),n.trackClicks&&(d.trackClicks(E,"a[name='rc-link']",(e=>{i.log("user-clicked-related_content",t,{content:e})})),d.trackClicks(E,"a[name='action-link']",(e=>{i.log("user-clicked-unit",t,{link:e})}))),n.afterRendering){const t=()=>{A.remove(),n.head=T.replace("{{restarted}}","true"),n.restarted=!0,e(...arguments)};n.afterRendering(E,{restart:t,restarted:n.restarted})}if(n.afterView&&d.whenVisible(A,{},(()=>{n.afterView(E)})),n.resizeContainer){const e=E.firstElementChild,t=()=>{const t=e.offsetWidth,i=e.offsetHeight+(n.resizeContainer.offset||10),r=A.style.cssText+`height: ${i}px !important;`;if(A.setAttribute("style",r),$.resizeGAMContainer){g(l,{width:t,height:i,style:r},$.resizeGAMContainerParents)}};new ResizeObserver(t).observe(e),t()}const R=Array.from(E.querySelectorAll(".thumbnail"));for(const e of R)x($,e);if(!1!==t.get("config").reimportArticles)for(const e of R)v(e,k((e=>{a({env:t.get("env"),publisherId:t.get("publisherId"),articleId:e.closest("a[name=rc-link]").href,reimport:!0})})));return setTimeout((()=>{try{const e=I.frameElement.getAttribute("hindsight"),t=I.document.head.querySelector("#wpr-usedcss");e&&t&&t.remove()}catch(e){r("removing third-party elements failed",e)}}),1e3),I}}},{"../events/events-logger":27,"../services/article-upload":43,"../trackers/factory":53,"../utils/containers":60,"../utils/css":61,"../utils/env":63,"../utils/functions":66,"../utils/html":67,"../utils/images":68,"../utils/library-api":70,"../utils/logging":71,"../utils/random":74,"../utils/site-styles":76,"../utils/tracking":80,"../utils/window":81}],38:[function(e,t,n){const{log:i}=e("../utils/logging"),{whenVisible:r}=e("../utils/tracking"),{renderAtPosition:o}=e("./block-rendering"),{renderBlockAds:a}=e("../ads/rendering"),{getBlockContextualData:s}=e("../services/block-contextual"),{createOnlyAdBlock:l}=e("./in-paragraph-ads"),{createRelatedContentBlock:c}=e("./related-content"),{createRelatedTilesBlock:d}=e("./related-tiles"),u={in_paragraph_only_ad:l,related_content:c,related_tiles:d};function g(e){const t=function(e){const t=e.get("block");return u[t.type]?u[t.type](e,t,e.get("data")):(i("WRONG: Block type not supported:",t.type),null)}(e);if(!t){const t=e.get("block").id||e.get("block").type;return i(`WARNING: ${t} block will not render.`),!1}for(const{target:n,positioning:i}of e.get("positioningTargets"))p(e,t,n,i,e.get("body"));return!0}function p(e,t,n,s,l){const c=e.get("block");if(c.lazy)return i(c.id||c.type,"will be lazy loaded"),c.lazy=!1,void r(n,{margin:c.lazyMargin},(()=>{p(...arguments)}));i(`Rendering ${c.id||c.type} with ${s.type} positioning`);const d=o(e,t,n,s.insert);t.ad&&a(c,d,t,l,e)}t.exports={renderBlocks:async function(e){let t=!1;for(const n of e){const e=await s(n);n.set("data",e);const i=g(n);t=t||i}return t}}},{"../ads/rendering":11,"../services/block-contextual":46,"../utils/logging":71,"../utils/tracking":80,"./block-rendering":37,"./in-paragraph-ads":39,"./related-content":40,"./related-tiles":41}],39:[function(e,t,n){const{window:i}=e("../utils/window"),{mapToCss:r,overrideStyles:o}=e("../utils/css");t.exports={createOnlyAdBlock:function(e,t){if(e.get("adsBlocked"))return null;let n={iframe:{height:t.adHeight||300,width:"100%",display:"block",border:0},container:{"margin-left":"auto","margin-right":"auto"},adContainer:{padding:".3125rem 0 8px","border-top":"1px solid #dddee4","border-bottom":"1px solid #dddee4"},title:{content:"ADVERTISEMENT","font-size":9,"text-transform":"uppercase","text-align":"center",color:"#8c8c8c","letter-spacing":1,margin:"10px 0","font-family":"'Arial', sans-serif","font-weight":"normal","line-height":1,"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"},ad:{display:"flex","align-items":"center","justify-content":"center"},rectangle:{height:"250px !important"}};const a=t.mobile||i.screen.width<767;a&&(n.ad={margin:"0 auto"}),n=o(n,t.styles);const s=r(n),l=`\n    <div id="container" style="${s.container}">\n      <div id="adContainer" style="${s.adContainer}">\n          <div id="title" style="${s.title}">\n              ADVERTISEMENT\n          </div>\n          <div id="ad" style="${s.ad}"></div>\n      </div>\n    </div>\n    <div id="adScript"></div>\n  `;return{elementType:t.elementType||"iframe",body:l,trackViews:!0,attributes:{style:s.iframe},ad:{scriptContainer:"#adScript",adContainer:"#ad",containerStyle:s.rectangle,mobile:a}}}}},{"../utils/css":61,"../utils/window":81}],40:[function(e,t,n){const{window:i}=e("../utils/window"),{mapToCss:r,overrideStyles:o}=e("../utils/css"),{getHostName:a}=e("../utils/env");function s(e,t){const{thumbnailSize:n,vertical:i,mobile:r,showAd:o,rcs:a}=e,s={iframe:{height:320,"max-width":670,"min-width":320,width:"100%",display:"block",margin:"0 auto",border:0},container:{"background-color":"white","box-shadow":"0 2px 8px 0 rgba(0,23,57,0.2)","border-radius":6,display:"flex",padding:"12px 16px 11px 16px","font-family":"sans-serif",border:"1px solid #e5e7eb","justify-content":"space-around",color:"black"},rcContainer:{width:"100%","padding-right":5,display:"flex","flex-direction":"column","justify-content":"space-around"},rcTitle:{"font-size":15,display:"flex","align-items":"center"},rcList:{margin:0,padding:0,height:220,display:"flex","flex-direction":"column","justify-content":"space-around"},rcItem:{display:"flex",height:n},rcImg:{"object-fit":"cover",height:n,width:n,"min-width":n,"border-radius":6},rcLink:{"text-decoration":"none",display:"flex","text-decoration-color":"currentColor",color:"inherit"},rcContent:{display:"flex","align-items":"center"},rcText:{color:"inherit","margin-left":10,display:"block","max-height":55,overflow:"hidden","line-height":18},rcPublisher:{display:"none"},rcDescription:{display:"none"},rcFooter:{"font-family":"'TT Commons',sans-serif",display:"flex","align-items":"center","justify-content":"flex-end","text-align":"right","font-size":8,"line-height":14,"letter-spacing":"0.4px","margin-right":5},adContainer:{"padding-left":15,"border-left":"1px solid #e5e7eb"},adTitle:{display:"block","margin-bottom":12,"margin-top":-2,"font-size":12,color:"rgba(0, 0, 0, 0.5)"},ad:{"border-radius":6,"min-width":300,"-webkit-box-pack":"center!important","-ms-flex-pack":"center!important","justify-content":"center!important",display:"flex!important",inline:"display: -webkit-box!important; display: -ms-flexbox!important;"},adFooter:{display:"none"},poweredByImage:{"max-height":18,margin:"0 10px 0 10px"}};return i&&(Object.assign(s.container,{"flex-direction":"column","align-items":"center",padding:"12px 10px 11px 10px"}),Object.assign(s.adContainer,{"padding-left":0,"margin-top":5,"padding-top":10,"border-left":0,"border-top":"1px solid #e5e7eb"}),Object.assign(s.rcList,{margin:0,"margin-top":5,height:"auto","max-height":230}),s.rcItem["margin-bottom"]=12),r&&(s.container.padding=8,s.container.overflow="hidden",s.adTitle.display="none",Object.assign(s.rcContainer,{"max-width":450,"padding-left":5,"padding-right":5,"box-sizing":"border-box"}),s.rcTitle["margin-bottom"]=5,s.rcList.margin=0,o&&(s.ad["min-width"]=300,s.adFooter=Object.assign({},s.rcFooter,{"margin-top":5}),s.rcFooter.display="none")),0===a.length&&(s.rcContainer.display="none",s.adContainer.border=0,s.adContainer["padding-left"]=0),t.displayPublishedDate&&(Object.assign(s.rcContent,{"align-items":"flex-start","flex-direction":"column","align-content":"flex-start"}),s.rcDate=Object.assign({},s.rcText,{"font-size":10}),s.rcItem.height=70),s}function l(e){const{mobile:t,rcs:n,showAd:r,textPlacement:o}=e,a={iframe:{height:320,"max-width":670,"min-width":320,width:"100%",display:"block",margin:"0 auto",border:0},container:{color:"white","background-color":"white",padding:10,"font-family":"sans-serif","font-size":14,border:"1px solid #e5e7eb",display:"flex","justify-content":"space-evenly","box-shadow":"0 2px 8px 0 rgba(0,23,57,0.2)","border-radius":6},adContainer:{},adTitle:{"margin-bottom":10,"font-size":12,color:"rgba(0, 0, 0, 0.5)"},ad:{},rcContainer:{width:"50%",display:"flex","flex-wrap":"wrap","justify-content":"space-between","align-items":"flex-start","margin-right":10},rcTitle:{width:"100%","margin-bottom":8,color:"black"},rcItem:{width:"48%",height:120,"background-size":"cover","margin-bottom":10,"background-position":"center top"},rcLink:{"text-decoration":"none","text-decoration-color":"currentColor",color:"inherit"},rcContent:{display:"flex","flex-direction":"column",height:"100%","justify-content":"flex-end","align-items":"flex-start",background:"linear-gradient(0deg,black, transparent)"},rcText:{color:"inherit","max-height":55,overflow:"hidden",padding:"5px 5px 2px 5px","line-height":18,"font-weight":"600"},rcFooter:{width:"100%","font-family":"'TT Commons',sans-serif",display:"flex","justify-content":"flex-end","font-size":8,"letter-spacing":"0.4px","align-items":"center",color:"gray"},rcImg:{"object-fit":"cover",height:120,width:"100%"}};return a.rcItemBig=Object.assign({},a.rcItem,{width:"100%"}),a.adFooter=Object.assign({},a.rcFooter,{display:"none","margin-top":5}),t&&(a.iframe["max-width"]=480,Object.assign(a.container,{padding:8,"flex-direction":"column","align-items":"center"}),Object.assign(a.rcContainer,{width:"100%","margin-right":0}),a.rcItem.height+=25,a.rcItem["margin-bottom"]=5,a.rcTitle["margin-bottom"]=6,a.adTitle.display=n.length?"none":"block",a.rcFooter.display=r?"none":"flex",a.adContainer["min-width"]=300,a.adFooter.display="flex",a.ad={width:300,"min-width":300,"max-width":300,"-webkit-box-pack":"center!important","-ms-flex-pack":"center!important","justify-content":"center!important",display:"flex!important",inline:"display: -webkit-box!important; display: -ms-flexbox!important;"}),t&&i.screen.width<420&&(a.iframe.width=i.screen.width-35,a.iframe.margin=0),0===n.length&&(a.rcContainer.display="none",a.adFooter.display="flex"),1===n.length&&(a.rcContainer["flex-direction"]="column",a.rcItem=a.rcItemBig),2!==n.length||t||(a.rcItem=a.rcItemBig),"below"===o&&(a.container.color="black",a.rcItem.height=t?180:210,a.rcText["max-height"]=t?55:70),a}function c(e,t,n,i){const{rcs:r,alternatives:o}=e,{poweredBy:a,rcTitle:s}=n,l=o.map((n=>d(n,t,i,{...e,hidden:!0}))).join("");return`\n    <div id="container" style="${i.container}">\n      ${!i.lineContainer&&t.headerMessage?`<div style="${i.headerMessage}">${t.headerMessage}</div>`:""}\n      ${i.lineContainer?function(e,t){return`\n    <div id="lineContainer" style="${t.lineContainer}">\n      <hr style="${t.line}">\n      <div id="lineMessage" style="${t.lineMessage}">\n        ${e}\n      </div>\n    </div>\n  `}(t.headerMessage||"Similar content you might like",i):""}\n      <div id="rc-container" style="${i.rcContainer}">\n        <div id="rc-title" style="${i.rcTitle}">${s}</div>\n        <ul id="rc-list" style="${i.rcList}">\n          ${d(r,t,i,e)}\n          ${l}\n        </ul>\n        <div id="rc-footer" style="${i.rcFooter}">${a}</div>\n      </div>\n      <div id="ad-container" style="${i.adContainer}">\n        <span id="ad-title" style="${i.adTitle}">\n          ${t.adTitle||"Featured Advertising"}\n        </span>\n        <div id="ad" style="${i.ad}"></div>\n        <footer id="ad-footer" style="${i.adFooter}">${a}</footer>\n      </div>\n    </div>\n    <div id="adScript"></div>\n  `}function d(e,t,n,{linkTarget:i,urlParam:r,hidden:o}){return e.map(((t,a)=>{const s=n.rcItemsSeparator&&a<e.length-1?n.rcItemsSeparator:"",l=o?"display: none!important;":"";return`\n      <li id="rc-${a}" style="${n.rcItem+s+l}" class="rcItem" recommender="${t.recommender}">\n        <a id="rc-link-${a}" name="rc-link" href="${t.url+r}" style="${n.rcLink}" target="${i}">\n          <div>\n            <img id="media-${a}" src="${t.media}" style="${n.rcImg}" alt="${t.title}" class="thumbnail">\n          </div>\n          <div id="rcContent" style="${n.rcContent}">\n            <span id="rc-text-${a}" style="${n.rcText}">${t.title}</span>\n            ${t.date?`<span id="rc-date-${a}" style="${n.rcDate}">Published Date: ${t.date}</span>`:""}\n            ${t.description?`<span id="rc-description-${a}" style="${n.rcDescription}">${t.description}</span>`:""}\n            ${t.publisher?`<span id="rc-publisher-${a}" style="${n.rcPublisher}">${t.publisher}</span>`:""}\n          </div>\n        </a>\n      </li>\n    `})).join("")}function u(e,t,n,i){const{rcs:r,alternatives:o}=e,{poweredBy:a,rcTitle:s}=n,l=o.map((n=>g(n,t,i,{...e,hidden:!0}))).join("");return`\n    <div id="container" style="${i.container}">\n      ${t.headerMessage?`<div style="${i.headerMessage}">${t.headerMessage}</div>`:""}\n      <div id="rc-container" style="${i.rcContainer}">\n        <div id="rc-title" style="${i.rcTitle}">\n          ${s}\n        </div>\n        ${g(r,t,i,e)}\n        ${l}\n        <div id="rc-footer" style="${i.rcFooter}">${a}</div>\n      </div>\n      <div id="ad-container" style="${i.adContainer}">\n        <div id="ad-title" style="${i.adTitle}">\n          ${t.adTitle||"Featured Advertising"}\n        </div>\n        <div id="ad" style="${i.ad}"></div>\n        <div id="ad-footer" style="${i.adFooter}">${a}</div>\n      </div>\n    </div>\n    <div id="adScript"></div>\n  `}function g(e,t,n,i){return"below"===i.textPlacement?e.map(((e,t)=>function(e,t,n,i,{linkTarget:r,urlParam:o,hidden:a}){const s=a?"display: none!important;":"";return`\n    <div id="rc-${t}" style="${i.rcItem+s}" class="rcItem" recommender="${e.recommender}">\n      <a id="rc-link-${t}" name="rc-link" href="${e.url+o}" style="${i.rcLink}" target="${r}">\n        <img id="media-${t}" src="${e.media}" style="${i.rcImg}" alt="${e.title}" class="thumbnail">\n        <div id="rc-text-${t}" style="${i.rcText}">${e.title}</div>\n      </a>\n    </div>\n  `}(e,t,0,n,i))).join(""):e.map(((e,t)=>function(e,t,n,i,{linkTarget:r,urlParam:o,mobile:a,hidden:s}){const l=s?"display: none!important;":"",c=(a||0!==t?i.rcItem:i.rcItemBig)+` background-image: url('${e.media}');`;return`\n    <div id="rc-${t}" style="${c+l}" class="rcItem" recommender="${e.recommender}">\n      <a id="rc-link-${t}" name="rc-link" href="${e.url+o}" style="${i.rcLink}" target="${r}">\n        <div id="rcContent" style="${i.rcContent}" class="rcContent">\n          <div id="rc-text-${t}" style="${i.rcText}">${e.title}</div>\n        </div>\n      </a>\n    </div>\n  `}(e,t,0,n,i))).join("")}t.exports={createRelatedContentBlock:function(e,t,n={}){n=function(e,t,n){const i=t.mobile;let r=!0;(t.hideAdvertisement||e.get("adsBlocked"))&&(r=!1);const o=t.thumbnailSize||70;let s=t.articleLimit||3,l=t.vertical;"nordot"===t.design&&(l=!0);let c=t.hidePoweredBy||!1;"nordot"!==t.design||t.poweredByImage||t.poweredByText||(c=!0),i&&(s=t.articleLimit||2,l=!0);let d=t.design;i&&!t.design&&(d="tiles");let u=t.textPlacement;"tiles"===d&&(u=i?"below":"regular"),"below"===u&&(s=2);const g=t.linkTarget||"_blank";let p=t.customArticleParameter||"";return"domainreferrer"===t.customArticleParameter&&(p=`?domainreferrer=${a()}`),{rcs:(n.related_articles||[]).slice(0,s),alternatives:(n.alternatives||[]).map((e=>(e.related_articles||[]).slice(0,s))),mobile:i,showAd:r,vertical:l,hidePoweredBy:c,thumbnailSize:o,design:d,textPlacement:u,linkTarget:g,urlParam:p}}(e,t,n);const{mobile:d,design:g,rcs:p,showAd:f,hidePoweredBy:h}=n;if(0===p.length&&t.hideWhenNoRC)return!1;if(0===p.length&&!f)return!1;let m=("tiles"===g?l:s)(n,t);f||(m.adContainer.display="none"),h&&(m.rcFooter.display="none",m.adFooter.display="none"),m=o(m,t.styles);const y=e.get("body");if(y&&y.offsetWidth<=320&&i.screen.width<767){const e=(i.screen.width-320)/2,t=e>0?y.offsetLeft-e:y.offsetLeft;m.iframe.margin=`0px 0px 0px ${-1*t}px`}const b={offset:0};t.headerMessage&&!m.lineContainer&&(b.offset+=35,m.container["margin-top"]=25,m.headerMessage={width:"100%",position:"absolute",top:0,display:"flex","justify-content":"center","font-size":12,color:"gray"}),t.footerMessage&&(b.offset+=30,m.container["margin-bottom"]=15,m.footerMsg={"font-size":12,color:"gray","font-family":m.container["font-family"]}),"nordot"===g&&(m=function(e,{showAd:t,rcs:n}){Object.assign(e.iframe,{"min-width":300,width:300,height:600}),Object.assign(e.container,{"font-size":10,width:300,height:600,border:0,padding:0,"box-shadow":0,"border-radius":0,"background-color":"#FAFAFA"}),e.lineContainer={display:"flex","justify-content":"center","align-items":"center","font-family":"sans-serif","font-size":11,"background-color":"#FAFAFA"},e.line={width:"100%",height:0,border:"1px solid #666666",margin:3,display:"inline-block",position:"absolute","z-index":"10"},e.lineMessage={border:"2px solid #666666","border-radius":20,padding:"5px 30px","background-color":"#FAFAFA","z-index":"10","margin-top":6},Object.assign(e.adContainer,{"margin-top":0,"padding-top":0,"border-top":0}),e.adTitle.display="none",Object.assign(e.ad,{width:300,height:250,"border-bottom":"2px solid #666666","padding-bottom":3,"border-radius":0}),e.rcTitle.display="none",e.rcContainer={},Object.assign(e.rcList,{margin:0,padding:"0 5px","max-height":"auto"}),Object.assign(e.rcImg,{height:70,width:70,margin:"2px 5px 2px 0","border-radius":0}),Object.assign(e.rcItem,{height:74,"margin-bottom":0,"margin-top":10,"padding-bottom":10,display:"flex","align-items":"center"}),e.rcItemsSeparator={"border-bottom":"1px solid #666666"},e.rcContent={"max-height":90,display:"flex","flex-direction":"column","justify-content":"space-between",color:"initial","line-height":14};const i={"max-width":210,overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};e.rcText=Object.assign({"font-size":12,"font-weight":"bold"},i),e.rcPublisher=Object.assign({color:"gray"},i),e.rcDescription={color:"gray"},n[0]&&n[0].publisher||(e.rcContent["justify-content"]="center",e.rcText["white-space"]="initial");t||(e.container.height=360,e.container["justify-content"]="space-evenly");return e}(m,n));const w=r(m),v=function(e,t,n,i){const r=function(e,t){if(e.poweredByHTML)return e.poweredByHTML;let n=e.poweredByText||"Hindsight";e.poweredByImage&&(t.adFooter={height:28,display:t.adFooter.display||"flex","align-items":"center","justify-content":"flex-end",color:"gray"},n=`<img src="${e.poweredByImage}" style="max-height: ${t.poweredByImage["max-height"]}px; margin: ${t.poweredByImage.margin};">`);let i=e.poweredByAttributes||{};i=Object.keys(i).map((e=>`${e}="${i[e]}"`)).join(" ");const r=e.poweredByLink||"https://hindsightsolutions.net/";return`Powered by&nbsp;<a href="${r}" target="_blank" ${i}>${n}</a>`}(e,t);let o=`<strong>${n.get("publisherName")}</strong>`;e.publisherLogo&&(o=`<img id="publisher-logo" src="${e.publisherLogo}" style="${i.publisherLogo}">`);const a=e.readNextFrom||"Read Next from",s=e.rcTitle||`${a}&nbsp;${o}`;return{poweredBy:r,rcTitle:s}}(t,m,e,w);let x=("tiles"===g?u:c)(n,t,v,w);t.footerMessage&&(x+=`<div id="footer-msg" style="${w.footerMsg}">${t.footerMessage}</div>`);let k="";return!1!==t.underlineLinks&&(k+="<style>.rcItem:hover { text-decoration: underline!important; }</style>"),!1!==t.underlineLinks&&"tiles"===g&&(k+="<style>.rcContent:hover { backdrop-filter: blur(2px)!important; }</style>"),{elementType:"iframe",head:k,body:x,trackViews:!0,trackClicks:!0,attributes:{style:w.iframe},resizeContainer:b,ad:{scriptContainer:"#adScript",adContainer:"#ad",containerStyle:w.ad,mobile:d,adBlock:"#ad-container"}}}}},{"../utils/css":61,"../utils/env":63,"../utils/window":81}],41:[function(e,t,n){const{mapToCss:i,overrideStyles:r}=e("../utils/css"),{includeAds:o}=e("../utils/tiles"),{breakLines:a}=e("../utils/text");function s(e,t,n){let i="";return n&&(i=`<div style="${t.headerExtraMessage}">${n}</div>`),`\n    <div id="lineContainer" style="${t.lineContainer}">\n      <hr style="${t.line}">\n      ${i}\n      <div id="lineMessage" style="${t.lineMessage}">\n        ${e}\n      </div>\n      ${i?"":"<div></div>"}\n    </div>\n  `}t.exports={createRelatedTilesBlock:function(e,t,n={}){let l=n.related_articles;if(!l)return!1;const c=t.mobile,d=t.tilesPerRow||(c?1:3);t.tiles=t.tiles||9,t.rows=t.rows||3;const u=t.adsStart,g=t.adsFrequency||(c?2:1),p=c?t.tiles:t.rows*d,f=t.adsLimit;l=o({start:u,every:g,tiles:l,until:p,adsLimit:f}),t.headerMessage=t.headerMessage||"Related content you might like",t.headerExtraMessage=!c&&t.headerExtraMessage;const h=t.tileHeight||250,m=c?300:"100%";let y={iframe:{width:m,"min-width":c?300:700,display:"block",border:0,padding:c?0:6,margin:"0 auto"},container:{width:m,"font-family":"'Montserrat', sans-serif","font-size":14,display:"flex","flex-direction":"column","margin-top":c?10:0},row:{width:m,"box-sizing":"border-box","margin-top":10,display:"flex","justify-content":"space-between"},ad:{width:300,height:h},adTile:{flex:c?"0 0 250px":"0 0 300px",height:h,"margin-bottom":15},tile:{flex:c?"auto":"1 1 300px","max-width":c?300:320,"margin-bottom":15},mediaContainer:{display:"flex","justify-content":"center"},media:{width:"100%","max-height":160,"object-fit":"cover"},link:{display:"flex","flex-direction":"column","justify-content":"space-between","text-decoration":"none",color:"initial",height:c?"auto":h},title:{overflow:"hidden","font-size":16,"font-weight":"bold","margin-top":7,"margin-bottom":7,"max-height":58},description:{display:"none","max-height":36,overflow:"hidden",color:"#767676"},publisher:{"max-height":15},lineContainer:{display:"flex","justify-content":"center","align-items":"center","font-family":"'Montserrat', sans-serif"},line:{width:"100%",height:0,border:"1px solid #535353",margin:3,display:"inline-block",position:"absolute","z-index":"10"},lineMessage:{border:"2px solid #535353","border-radius":30,padding:"6px 25px","background-color":"white","z-index":"10","font-size":14},poweredByLink:{"text-decoration":"none",color:"inherit",display:"flex","align-items":"center",margin:-2},poweredByImage:{"max-width":80,"margin-left":5},headerExtraMessage:{"font-weight":"bold","font-size":15,padding:"25 0 0 3"}};t.displayArticleDescription&&(Object.assign(y.title,{"max-height":38,"margin-top":3,"margin-bottom":0}),y.description.display="flex",a(l,"description",80)),t.headerExtraMessage&&(Object.assign(y.lineContainer,{"justify-content":"space-between"}),Object.assign(y.lineMessage,{color:"#767676","font-weight":"bold",margin:"0 15 0 15"})),y=r(y,t.styles);const b=i(y);let w="Powered by ";t.poweredByImage?w+=`<div><img style="${b.poweredByImage}" src="${t.poweredByImage}"></div>`:w+="Hinodi",w=`<a href="${t.poweredByLink}" target="_blank" style="${b.poweredByLink}">${w}</a>`;const v=`\n    <div>\n      ${s(t.headerMessage,b)}\n      <div id="container" style="${b.container}">\n        ${function(e,t,n,i){const r=t.linkTarget||"_blank";let o=0;return e.map((e=>{let a;if(o+=1,a="ad"===e?`<div id="tile-${o}" style="${n.adTile}" class="ad"></div>`:`\n        <div id="tile-${o}" style="${n.tile}">\n          <a id="tile-link-${o}" href="${e.url}" target="${r}" style="${n.link}" name="rc-link">\n            <div id="media-container" style="${n.mediaContainer}">\n              <img id="media-${o}" src="${e.media}" style="${n.media}" alt="${e.title}" class="thumbnail">\n            </div>\n            <span id="title-${o}" style="${n.title}">${e.title}</span>\n            <span id="description-${o}" style="${n.description}">${e.description}</span>\n            <span id="publisher-${o}" style="${n.publisher}">\n              ${t.publisherName||"Â© "+e.publisher}\n            </span>\n          </a>\n        </div>\n      `,!t.mobile){const e=o%i;1===e?a=`<div id="row" class="row" style="${n.row}">${a}`:0===e&&(a=`${a}</div>`)}return a})).join("")}(l,t,b,d)}\n      </div>\n      ${s(w,b,t.headerExtraMessage)}\n      <div id="adScript"></div>\n    </div>\n  `;return{elementType:"iframe",head:`\n    <link rel="preconnect" href="https://fonts.googleapis.com">\n    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&display=swap" rel="stylesheet"></link>\n    <style>\n      .row > div:nth-child(1){\n        padding-right: 10px;\n      }\n      .row > div:nth-child(${d}){\n        padding-left: 10px;\n      }\n    </style>\n  `,body:v,trackViews:!0,trackClicks:!0,attributes:{style:b.iframe},resizeContainer:!0,ad:{scriptContainer:"#adScript",adContainers:".ad",containerStyle:b.ad}}}}},{"../utils/css":61,"../utils/text":78,"../utils/tiles":79}],42:[function(e,t,n){const i=e("../events/events-logger"),{log:r}=e("../utils/logging"),{chainedRetry:o}=e("../utils/async"),{uploadArticle:a}=e("./article-upload"),{getArticleContextual:s}=e("../api-client/article-contextual"),{getRecommendations:l}=e("../api-client/recommendations");function c(e){const t={env:e.get("env"),publisherId:e.get("publisherId"),articleId:e.get("articleId")};return s(t).then((n=>(101===n.code&&e.get("publisherFlags").includes("articleIngest")&&a(t),n)))}function d(e){if(!e||"article_not_found"===e.message||!Array.isArray(e.data))return!1;const t=e.data.find((e=>{const t=e.recommender_config_id;return t&&t.length&&"-1"!==t}));return!!t&&t.recommender_config_id}async function u(e,t,n={}){const i=n.retries||3,r=n.delay||1e3;let a=0;const s={env:e.get("env"),publisherId:e.get("publisherId"),articleId:e.get("articleId")},l=e=>d(e)?e:(a+=1,t.getRecommendations(s)),c=n=>{if(t.eventsLogger.log("article-imported",e,{got_related_content:d(n),retries:a,error:n instanceof Error&&n.message}),n instanceof Error)throw n;return n};let u=await t.getRecommendations(s);if("article_not_found"===u.message)try{await t.uploadArticle({...s,endpoint:"import"}),u=await o(u,l,r,i),c(u)}catch(e){c(e)}return u}t.exports={fetchContextualInfo:function(e){if(e.get("offlineResponse"))return e.get("offlineResponse");let t=c;return e.get("publisherFlags").includes("contextualFlowV2")&&(t=()=>u(e,{getRecommendations:l,uploadArticle:a,eventsLogger:i})),t(e).then((t=>(i.log("client-received-api_success",e),r("Got article contextual info successfully",t),t))).catch((t=>(i.log("client-received-api_error",e,{error:t}),r("ERROR: Fetching article contextual info failed",t),null)))},contextualFlowV2:u}},{"../api-client/article-contextual":12,"../api-client/recommendations":19,"../events/events-logger":27,"../utils/async":57,"../utils/logging":71,"./article-upload":43}],43:[function(e,t,n){const{window:i}=e("../utils/window"),{upload:r}=e("../api-client/article-upload");t.exports={uploadArticle:function({env:e,publisherId:t,articleId:n,reimport:o,endpoint:a}){const s=`<html>${i.document.head.outerHTML}${i.document.body.outerHTML}</html>`;return r(e,n,s,t,o,a)}}},{"../api-client/article-upload":13,"../utils/window":81}],44:[function(e,t,n){const{getLocalOverride:i}=e("../utils/env"),{log:r}=e("../utils/logging");function o(e){return t=>{const n=((t||{}).metadata||[]).find((t=>t.type&&t.type.toLowerCase()===e.toLowerCase()));return n?(r("Got article metadata",n),n.value):(r("Got no article metadata"),null)}}t.exports={getArticleSection:async function(e){const t=i("articleSection");if(t)return r("Got article section override",t),{section:t};const{data:n}=e||{};return n&&n.section?(r("Got article section",n.section),{section:n.section}):(r("Got NO article section"),{section:""})},getMetadataByType:o,getMetadatasByType:function(e){return t=>e.reduce(((e,n)=>(e[n]=o(n)(t),e)),{})}}},{"../utils/env":63,"../utils/logging":71}],45:[function(e,t,n){const{log:i}=e("../utils/logging"),{getMetadatasByType:r}=e("./article");t.exports={getBeauty:function(e,t){const n=r(["call_to_action","call_to_action_url"])(e||{}),o={call_to_action:n.call_to_action||"Handsoaps, Sanitizers and Creams",call_to_action_url:n.call_to_action_url||"https://www.skinstore.com/body/hand-care.list",message1:t.message1||"Premium",message2:t.message2||"with Exclusive Savings!"};return i("Beuty data",o),o}}},{"../utils/logging":71,"./article":44}],46:[function(e,t,n){const{getSportsGamblingMatch:i}=e("./sports"),{getRelatedContent:r}=e("./related-content"),{getBeauty:o}=e("./beauty"),{getCarousel:a}=e("./carousel"),{getMetadataByType:s}=e("./article"),l={fanduel:i,related_content:r,fyt:s("call_to_action"),beauty:o,related_tiles:r,carousel:a};t.exports={needsToFechContextualInfo:function(e){return l[e.type]&&!e.offline&&!e.dataSource},getBlockContextualData:function(e){const t=e.get("block");if(t.offline)return t.offline;const n=e.get("contextualInfo"),i=l[t.type];return i?i(n,t):null}}},{"./article":44,"./beauty":45,"./carousel":47,"./related-content":50,"./sports":51}],47:[function(e,t,n){const{log:i}=e("../utils/logging");t.exports={getCarousel:function(e,t){const{data:n}=e||{},r=(n||[]).find((({type:e})=>"bridtv_unit"===e));return r||i("Got NO BRIDTV carousel information"),r||{carrousel_id:t.defaultCarousel,player_id:t.defaultPlayer}}}},{"../utils/logging":71}],48:[function(e,t,n){const{getEnv:i,getLocalOverride:r,inAdmin:o}=e("../utils/env"),{log:a,debug:s}=e("../utils/logging"),{inGAMPreview:l}=e("../utils/containers"),{containerWindow:c}=e("../utils/window"),{getSiteId:d}=e("../utils/site-id"),{getStaticConfig:u}=e("../api-client/config");async function g(){const e=i();a("Current environment is",e);const t=function(){let e=r("config");return l(c)&&(e={publisherName:"Hindsight",articleBodySelector:!1,blocks:[{type:"related_content",offline:{related_articles:[{media:"https://thesource.com/wp-content/uploads/2020/06/virus-outbreak-washington-united-states-shutterstock-editorial-10661046f.jpg",title:"D.C. Mayor Muriel Bowser Kicks National Guard Out Of Her City",url:"https://thesource.com/2020/06/05/d-c-mayor-muriel-bowser-kicks-national-guard-out-of-her-city/"},{media:"https://thesource.com/wp-content/uploads/2019/11/10372936a.jpg",title:"Starbucks Responds to Employees Questioning Their Decision to Ban Visible BLM Gear",url:"https://thesource.com/2020/06/12/starbucks-responds-to-employees-questioning-their-decision-to-ban-visible-blm-gear/"},{media:"https://thesource.com/wp-content/uploads/2019/07/The-Weeknd001.jpg",title:"The Weekend Urges the Public to Give Whatever They Can After Donating $500K to BLM Movement",url:"https://thesource.com/2020/06/02/the-weekend-urges-the-public-to-give-whatever-they-can-after-donating-500k-to-blm-movement/"}]},adProvider:{type:"didna",slot:"/170737076/hindsightip/default.com",config:"https://storage.googleapis.com/didna_hb/hindsight/ip/default_config.js"},positioning:[{type:"fixed_element",selector:"script"}]}]}),e&&a("Got frontend config from local override"),e}()||await async function(e){const t=d();a("Getting frontend config with site identifier:",t);const n=o(),i=await u(e,t,n);return s("Frontend config",i),i?(a("Got frontend config successfully for",i.publisherName),i):null}(e);return t.blocks=(t.blocks||[]).filter((e=>!e.standalone)),t.start=Object.assign({lazy:!0},t.start),t}t.exports={getConfiguration:async function(){try{return await g()}catch(e){return s("Error getting configuration",e),null}}}},{"../api-client/config":14,"../utils/containers":60,"../utils/env":63,"../utils/logging":71,"../utils/site-id":75,"../utils/window":81}],49:[function(e,t,n){const{window:i}=e("../utils/window"),{getArticleId:r}=e("../utils/article"),{onboardPublisher:o}=e("../api-client/network"),{getEnv:a}=e("../utils/env"),{getSiteId:s}=e("../utils/site-id"),{overrideStyles:l}=e("../utils/css"),{getPrivateExternalParameter:c}=e("../utils/library-api");function d(e,t){const n=Object.assign({},e,t);return t.blocks=t.blocks||[],n.blocks=(e.blocks||[]).map(((e,n)=>{const i=t.blocks[n]||{},r=Object.assign({},e,i);return r.overrides=(e.overrides||[]).concat(i.overrides||[]),r.styles=l(e.styles,i.styles),r.fallback=(i.fallback||[]).concat(e.fallback||[]),r})),n}t.exports={mergeConfigs:d,getNetworkConfig:function(e){const t=c("hindsight_network");if(!e){let e=null;return"63c03158b57281ae7562f1f7"===t.network_id&&(e=s()),o(a(),r(),function(){const e=i.document.querySelector("meta[property*='site_name'],meta[name*='site_name']");return e?e.getAttribute("content"):null}(),e,t),null}const n=d(t.base_config,e);return n.networkId=t.network_id,n}}},{"../api-client/network":17,"../utils/article":56,"../utils/css":61,"../utils/env":63,"../utils/library-api":70,"../utils/site-id":75,"../utils/window":81}],50:[function(e,t,n){const{log:i}=e("../utils/logging"),{getNordotFeed:r}=e("../api-client/nordot"),{randomPick:o,getRandomInt:a}=e("../utils/random"),{breakLines:s}=e("../utils/text"),{formatDate:l}=e("../utils/dates");function c(e,t){e.recommender_config_id=(e.recommender_config_id||"").toString();let n=[...e.related_articles];return n=n.map((t=>Object.assign(t,{recommender:e.recommender_config_id}))),n=n.sort(((e,t)=>new Date(t.published_date)-new Date(e.published_date))),n.length<3&&(n=n.concat(t.fallback||[])),n=n.map((e=>Object.assign(e,{media:e.media||d(t)}))),n=Object.values(n.reduce(((e,t)=>(e[t.title]=t,e)),{})),t.displayPublishedDate&&(n=n.map((e=>Object.assign(e,{date:l(e.published_date)})))),"nordot"===t.design&&s(n,"description",85),t.lineBreakTitleAtCharacter&&s(n,"title",t.lineBreakTitleAtCharacter),e.related_articles=n,e}function d(e){const t=(e.thumbnailFallbacks||[]).find((e=>e.url));return e.defaultThumbnailUrl||(t||{}).url}t.exports={getRelatedContent:async function(e,t){try{let n=(e||{}).data||[];Array.isArray(n)||(n=[]),t.dataSource&&(n=await async function(e){const t={related_articles:[],recommender_config_id:"external_source_nordot"};return t.related_articles=await r(e.dataSource),[t]}(t));let s={related_articles:[],recommender_config_id:""};s=c(s,t);const l=n.filter((e=>e.related_articles)).map((e=>c(e,t)));let d;const u=[];if(t.mainRecommender){for(const e of l)e.recommender_config_id===t.mainRecommender?d=e:u.push(e);i("Alternative RC",u)}return d||(d=l.length>0?function(e){const t="_ctr",n=e.filter((e=>e.recommender_config_id.endsWith(t))),r=e.filter((e=>!e.recommender_config_id.endsWith(t)));if(0===r.length||0===n.length)return i("RC: picking randomly from all RCs"),o(e);const s=5,l=a(100)<s,c=l?r:n;return i("RC: picking randomly from",l?"monitoring":"calculated"),o(c)}(l):s),i("Related content:",d),{related_articles:d.related_articles,recommender_config_id:d.recommender_config_id,alternatives:u,rc_response_code:(e||{}).code}}catch(e){return i("Failed to get related content",e),{related_articles:[],recommender_config_id:""}}}}},{"../api-client/nordot":18,"../utils/dates":62,"../utils/logging":71,"../utils/random":74,"../utils/text":78}],51:[function(e,t,n){const{getLocalOverride:i}=e("../utils/env"),{log:r}=e("../utils/logging");t.exports={getSportsGamblingMatch:function(e){const t=i("sportsData");if(t)return t;const n=((e||{}).data||[]).find((e=>e.extra_data&&e.extra_data.fanduel));return n?(n.extra_data.fanduel.league=n.label.split(".")[1],r("Got fanduel data",n.extra_data.fanduel),n.extra_data.fanduel):(r("Got no fanduel data"),null)}}},{"../utils/env":63,"../utils/logging":71}],52:[function(e,t,n){t.exports={createTracker:function(e){const t=e.entityId||"xQQ7qJHxNuCwqyZPX";return`\n    <script>\n      window.assertive = {\n          debug: ${Boolean(e.debug)},\n          entityId: "${t}",\n          analytics: {\n              sampleRate: 1,\n              custom: {\n                  layout: null,\n                  userState: null,\n                  custom_1: null,\n                  custom_2: null,\n                  custom_3: null,\n                  custom_4: null,\n                  custom_5: null,\n                  custom_6: null,\n                  custom_7: null,\n                  custom_8: null,\n                  custom_9: null,\n              },\n          },\n      };\n      window.assertive.hash = {\n        generator: "server",\n        values: 500,\n        subCacheId: ${e.subCacheId||"window.top.location.host"},\n        key: function () {\n          return [window.top.location.host, window.top.location.pathname].join("|");\n        },\n      };\n    <\/script>\n    <script src="https://${t.toLowerCase()}.ay.delivery/client-v2.js" async><\/script>\n  `}}},{}],53:[function(e,t,n){const i={assertiveyield:e("./assertiveyield")};t.exports={createTrackers:function(e){return e.map((e=>{const t=i[e.type];return t?t.createTracker(e):""})).join("\n")}}},{"./assertiveyield":52}],54:[function(e,t,n){const{window:i,containerWindow:r}=e("./utils/window"),{ExecutionContext:o,PublisherContext:a,ArticleContext:s,BlockContext:l}=e("./contexts/all"),c=e("./events/events-logger"),d=new o({library:"unified",container:r.document.querySelector("body")});c.log("browser-loaded-client",d);const u=e("./utils/env"),g=e("./utils/start-methods"),{log:p}=e("./utils/logging"),{detectAdBlocker:f}=e("./utils/ad-block-detection"),{getArticleId:h,findArticleBody:m}=e("./utils/article"),{triggerOnArticleLoad:y}=e("./utils/infinite-scroll"),{inGAM:b}=e("./utils/containers"),{getConfiguration:w}=e("./services/configuration"),{applyConfigModifiers:v,blockIsEnabled:x,applyContextualOverrides:k}=e("./utils/configuration"),{applyExperiments:C}=e("./utils/experiments"),{needsToFechContextualInfo:_}=e("./services/block-contextual"),{fetchContextualInfo:$}=e("./services/article-contextual"),{renderBlocks:A}=e("./rendering/blocks-rendering"),{setPositioningTargets:I,getAllTargets:E,filterWaterfallRendering:S}=e("./positioning/blocks-positioning"),{whenVisible:T}=e("./utils/tracking"),{getNetworkConfig:P}=e("./services/network"),{createPublicAPI:L,libraryHasLoaded:O,networkMode:R}=e("./utils/library-api");let j;async function B(){if(p("STEP: START"),O())return p("Already loaded, terminating"),!1;if(r.document.body||await g.onDOMLoaded(),i.document.getElementById("no-hindsight-ip-unit"))return p("Found element with id 'no-hindsight-ip-unit', terminating."),!1;let e=await w();if(R()&&(e=P(e)),!e)return p("ERROR: Got no config"),!1;if(0===e.blocks.length)return p("WARNING: Got no enabled blocks"),!1;j=f(u.getEnv(),e);const t=new a(d,e);c.log("client-loaded-config",t);const n=()=>function(e){p("STEP: FIND ARTICLE");const t=e.get("config"),n=m(t.articleBodySelector);if(n)p("Article body:",n);else if(t.articleBodySelector)return p("WRONG: Article body not found using selector",t.articleBodySelector),!1;const i=new s(e,{body:n,articleId:h(t,n)}),o=()=>async function(e){p("STEP: PROCESS ARTICLE");const t=e.get("body");t&&(t.hindsight_rendered=!0,t.setAttribute("hindsight_rendered",!0));const n=e.get("config");(!n.articleBodySelector||n.articleBodySelector&&t)&&c.log("client-detected-opportunity",e);let i=n.blocks.map((i=>{const r=v(i,n,t),o=C(r);return p(r.id||r.type,"config after overrides",r),new l(e,{block:r,appliedExperiment:o})})).filter((e=>x(e.get("block")))).map((e=>I(e))).filter(S).filter((e=>e.get("positioningTargets").length>0));i.some((e=>_(e.get("block"))))?(n.start.lazy&&(p("Waiting for LAZY LOADING"),await T(E(i),{margin:n.start.lazyMargin})),p("STEP: FETCH ARTICLE"),e.set("contextualInfo",await $(e)),i=k(i)):p("no need to fetch article");if(0===i.length)return p("no blocks to render, terminating"),M();return async function(e,t){p("STEP: RENDER"),e.set("adsBlocked",await j);const n=await A(t);n&&!b(r)&&c.log("client-detected-direct_opportunity",e);return p("Finished rendering blocks."),M()}(e,i)}(i);if(t.start.onInteraction)return g.onInteraction(t,n,o);if(t.start.waitFor)return g.waitFor(t,n,o);return o()}(t);if(e.start.infiniteScroll&&y(n),e.start.onDemand)g.onDemand(n);else if(e.start.continuous){const t=setInterval(n,e.start.continuous.everyMs||2e3);e.start.continuous.timeout&&setTimeout((()=>{clearInterval(t)}),e.start.continuous.timeout)}else{if(!e.start.delayed)return n();setTimeout(n,e.start.delayed)}return!0}function M(){return p("STEP: END"),!0}L(B),B()},{"./contexts/all":21,"./events/events-logger":27,"./positioning/blocks-positioning":29,"./rendering/blocks-rendering":38,"./services/article-contextual":42,"./services/block-contextual":46,"./services/configuration":48,"./services/network":49,"./utils/ad-block-detection":55,"./utils/article":56,"./utils/configuration":59,"./utils/containers":60,"./utils/env":63,"./utils/experiments":65,"./utils/infinite-scroll":69,"./utils/library-api":70,"./utils/logging":71,"./utils/start-methods":77,"./utils/tracking":80,"./utils/window":81}],55:[function(e,t,n){const{containerWindow:i}=e("./window"),{log:r}=e("./logging"),{getAssetsURL:o}=e("../api-client/utils");t.exports={detectAdBlocker:function(e,t){if(t){if(!t.blocks.find((e=>!e.hideAdvertisement&&["in_paragraph_only_ad","related_content"].includes(e.type))))return r("no need to detect adblocker"),Promise.resolve(!1)}const n=i.document.createElement("script");n.src=`${o(e)}/teju-webclient/wp-banners.js`;const a=new Promise((e=>{const t=Date.now(),i=setTimeout((()=>{o(!1,"timeout")}),1e3),o=(n,o)=>{const a=Date.now()-t;r("Ads blocked:",n,a,o),clearTimeout(i),e(n)};n.onload=()=>{o(!1,"onload")},n.onerror=()=>{o(!0,"onerror")}}));return i.document.body.appendChild(n),a}}},{"../api-client/utils":20,"./logging":71,"./window":81}],56:[function(e,t,n){const{getLocalOverride:i}=e("./env"),{window:r}=e("./window"),{log:o}=e("./logging"),{getPublicExternalParameter:a}=e("./library-api"),s={articleIdOverride:()=>i("articleUrl")||i("articleId"),referrerOverride:()=>a("hindsight_referrer"),getCustomArticleId:function(e,t){if(!e||!e.articleId)return null;if(e.articleId.fullArticleURL)return r.location.href;if(e.articleId.articleURL)return s.locationURL();if(e.articleId.selector){let n=r.document;e.articleId.fromArticleBody&&t&&(n=t);const i=n[e.articleId.ancestorsSelector?"closest":"querySelector"](e.articleId.selector);if(i){const t=e.articleId.extractAttribute||"href",n=i[t]||i.getAttribute(t);if(n)return n}}return null},ogURL(){const e=r.document.querySelector("meta[property='og:url']");if(!e)return null;const t=e.getAttribute("content"),n=s.locationURL();return l(t)===l(n)?t:n},locationURL:()=>r.location.href.split("?")[0]};function l(e){return new URL(e).host}t.exports={getArticleId:function(e,t){let n=function(e,t){for(const n of Object.keys(s)){const i=s[n](e,t);if(i)return o(n,"found article id:",i),i}return""}(e,t);return n=decodeURIComponent(n),n.startsWith("http")||(n=r.location.origin+n),n.endsWith("/")&&!function(e={}){return(e.articleId||{}).keepTrailingSlash}(e)&&(n=n.substring(0,n.length-1)),o("formatted final article id:",n),n},findArticleBody:function(e){return e?Array.from(r.document.querySelectorAll(e)).find((e=>!e.hindsight_rendered)):(o("WARNING: no articleBodySelector disables all paragraph-related features"),null)}}},{"./env":63,"./library-api":70,"./logging":71,"./window":81}],57:[function(e,t,n){function i(e){return new Promise((t=>setTimeout(t,e)))}t.exports={wait:i,retry:function e(t,n,r){return new Promise(((o,a)=>t().then(o).catch((s=>r>0?i(n).then(e.bind(null,t,n,r-1)).then(o).catch(a):a(s)))))},chainedRetry:function e(t,n,r,o){return 0===o?Promise.resolve(t):new Promise(((a,s)=>i(r).then((()=>n(t))).then((t=>o>0?e(t,n,r,o-1).then(a).catch(s):a(t))).catch(s)))}}},{}],58:[function(e,t,n){const{window:i,containerWindow:r}=e("./window"),{log:o}=e("./logging"),{getSiteLanguage:a,getHostName:s,getURL:l}=e("./env"),{getArticleParagraphs:c,getCharCount:d}=e("./paragraphs");function u(e,t){return t===e}function g(e,t){return t<e}function p(e,t){return t>e}function f(e,t){return function(n,...i){return t.some((t=>t(Object.keys(n).includes("value")?n.value:n,e(n,...i))))}}const h={eq:[u],lt:[g],lte:[g,u],gt:[p],gte:[p,u]};function m(e,t){const n={};for(const i of Object.keys(h))n[e+"/"+i]=f(t,h[i]);return n}function y(e,t=u){return(n,i)=>t(i.get(e),n)}const b={"screen/width/breakpoint":function(e){const t=e||767,n=i.screen.width;let r=!1;return n<t&&(r=!0),o(`Mobile: ${r}, screen width: ${n}px, breakpoint: ${t}px`),r},"html/contains":function(e){return Boolean(i.document.querySelector(e)||r.document.querySelector(e))},"html/contains/html":function(e){function t(t){const n=t.document.body.outerHTML,i=t.document.head.outerHTML;return n.includes(e)||i.includes(e)}return t(i)||t(r)},"html/language/eq":function(e){return a().toLowerCase()===e.toLowerCase()},...m("html/elements/count",(function({selector:e}){return i.document&&i.document.querySelectorAll?i.document.querySelectorAll(e).length:0})),"article/section/eq":function(e,t,{articleSection:n}){if(!n)return!1;const r=i.document.querySelector(n.selector);return!!r&&(r[n.select||"content"]||"").toLowerCase()===e.toLowerCase()},"article/domain/eq":function(e){return s().toLowerCase()===e.toLowerCase()},"article/url/contains":function(e){return l().toLowerCase().includes(e.toLowerCase())},"article/body/contains":function(e,{articleBody:t}){return Boolean(t.querySelector(e))},...m("article/body/elements/count",(function({selector:e},{articleBody:t}){return t.querySelectorAll(e).length})),"article/characters/lte":function(e,{articleBody:t,paragraphIdentification:n}){const i=c(t,n).reduce(((e,t)=>e+d(t)),0);return o(`Article characters count: ${i}`),i<=e},...m("article/paragraphs/count",(function(e,{articleBody:t,paragraphIdentification:n}){return c(t,n).filter((e=>e.valid&&e.textContent.trim())).length})),"article/contextual/classificationLabel":y("classificationLabel"),"article/contextual/title/contains":y("title",(function(e,t){return String(e).toLowerCase().includes(String(t).toLowerCase())}))};t.exports={evaluateConditions:function(e,t,n){if(!e||0===Object.keys(e).length)return!1;for(const i of Object.keys(e)){const r=b[i];if(r){o(`Evaluating ${i} condition`);if(!r(e[i],t,n))return o(`Condition ${i} does not match`),!1}else o("WRONG: Condition not supported:",i)}return!0},isContextualCondition:function(e){return e.startsWith("article/contextual/")}}},{"./env":63,"./logging":71,"./paragraphs":73,"./window":81}],59:[function(e,t,n){const{inAdmin:i}=e("./env"),{log:r}=e("./logging"),{overrideStyles:o}=e("./css"),{evaluateConditions:a,isContextualCondition:s}=e("./conditions"),{getPublicExternalParameter:l}=e("./library-api");function c(e,t={}){return e.styles&&t.styles&&(t.styles=o(e.styles,t.styles)),Object.assign(e,t)}function d(e,t,n,i,o){if(!t.match||0===Object.keys(t.match).length)return r("WRONG: Override with no match will not be applied");r(`Evaluating override ${t} for ${e.id||e.type} block`);const s=e.paragraphIdentification||n.paragraphIdentification||{},l=o||{articleBody:i,paragraphIdentification:s};return a(t.match,l,n)?(c(e,t.values),r(`Applied ${Object.keys(t.match)[0]} override for ${e.id||e.type} block`)):r(`Override on block ${e.id||e.type} will not be applied`)}function u(e,t){return e.positioning=(e.positioning||[]).map((n=>{const i=e.paragraphIdentification||t.paragraphIdentification||n.paragraphIdentification||{};return Object.assign({},i,n)})),e}function g(e){const t=!1!==e.enabled;return t||r("block",e.id||e.type,"removed, it's disabled"),t}function p(e={},t=[]){const n={};for(const i of Object.keys(e))t.includes(i)&&(n[i]=e[i]);return n}function f(e){const t=function(e={}){const t=["font-size","color","font-style","font-family","line-height"],n=p(e,["rcTitle","rcText"]);for(const e of Object.keys(n))n[e]=p(n[e],t);return n}((l("hindsight_styles")||{})[e.type]);return e.styles=o(e.styles,t),e}function h(e){return Object.keys(e.match||{}).some(s)}t.exports={applyParagraphIdentification:u,applyConfigModifiers:function(e,t,n){for(const i of e.overrides||[])h(i)||d(e,i,t,n);return i()&&(e=function(e){return(e.positioning||[]).push({type:"fixed_element",selector:"#hindsightadminunitpreview"}),e}(e)),e=f(e=u(e,t))},blockIsEnabled:g,applyOverrideValues:c,applyContextualOverrides:function(e=[]){return e.map((e=>{const t=e.get("block");for(const n of t.overrides||[])h(n)&&(r("evaluating contextual override",n),d(t,n,e.get("config"),e.get("body"),e));return e})).filter((e=>g(e.get("block"))))}}},{"./conditions":58,"./css":61,"./env":63,"./library-api":70,"./logging":71}],60:[function(e,t,n){function i(e){return(e.document||{}).location||{}}const r={inSafeFrame:e=>Boolean(e.$sf||e.hindsight_referrer),inGAMPreview:e=>"https://admanager.google.com"===(i(e).ancestorOrigins||[])[0],inTagDiv:e=>(i(e).href||"").indexOf("tdb_action=tdb_ajax")>0,inW3TotalCache:e=>"pwm_pageFrame"===(e.frameElement||{}).name};t.exports={inContainer:function(e){return Object.keys(r).some((t=>r[t](e)))},inGAM:function(e){return Boolean(e.inGptIF)},inGAMPreview:r.inGAMPreview,setContainerAttributes:function e(t,n={},i=!1){const o=t.frameElement;if(o){for(const e of Object.keys(n))o.removeAttribute(e),null!==n[e]&&o.setAttribute(e,n[e]);i&&function(e){return!(r.inSafeFrame(e)||!e.parent||!e.parent.frameElement||e.frameElement.id===e.parent.frameElement.id)}(t)&&e(t.parent,n,!1)}}}},{}],61:[function(e,t,n){function i(e,t){const n=t?"!important;":";";return Object.keys(e||{}).filter((t=>void 0!==e[t]&&null!==e[t])).map((t=>{return"inline"===t?e[t]:t.toLowerCase()+": "+(i=e[t],Number.isInteger(i)?Number.parseInt(i,10)+"px":i)+n;var i})).join(" ")}t.exports={toInlineCss:i,mapToCss:function(e,t){return Object.keys(e).reduce(((n,r)=>(n[r]=i(e[r],t||"iframe"===r),n)),{})},overrideStyles:function(e={},t={}){const n=Object.assign({},e);for(const e of Object.keys(t))n[e]=Object.assign({},n[e],t[e]);return n},createFonts:function(e={}){return`<style>${Object.keys(e).map((t=>`@font-face {font-family: "${t}"; src: url("${e[t]}");}`)).join("")}</style>`}}},{}],62:[function(e,t,n){t.exports={formatDate:function(e){if(!e)return"";const t=new Date(e);return`${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getDate().toString().padStart(2,"0")}/${t.getFullYear()}`}}},{}],63:[function(e,t,n){const{window:i,containerWindow:r}=e("./window"),{inGAM:o}=e("./containers"),{getPublicExternalParameter:a,getPrivateExternalParameter:s}=e("./library-api");function l(){return d("env")?d("env"):"staging-smart-tags-admin.solutionshindsight.net"===i.location.hostname?"STAGING":"smart-tags-admin.solutionshindsight.net"===i.location.hostname?"PRODUCTION-ADMIN":"PRODUCTION"}function c(){try{const e=a("hindsight_referrer");return new URL(e).toString()}catch(e){return i.location.href}}function d(e){return(s("hindsightConfig")||{})[e]}t.exports={getEnv:l,inAdmin:function(e){return"PRODUCTION"!==(e||l())},hasFlag:function(e){const t=i.location.href.split("?")[1],n=new URLSearchParams(t);return[n.get("hindsight_debug"),n.get("hindsight"),d("flags")].filter(Boolean).join(",").split(",").indexOf(e)>-1},getLocalOverride:d,getURL:c,getHostName:function(){const e=new URL(c()).host,t=e.match(/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:e},getSiteLanguage:function(){return i.document.querySelector("html").getAttribute("lang")||""},getDevice:function(){return o(r)?"GAM":i.screen.width<767?"MOBILE":"DESKTOP"}}},{"./containers":60,"./library-api":70,"./window":81}],64:[function(e,t,n){const{window:i}=e("./window"),{getURL:r}=e("./env"),{sendLogs:o}=e("../api-client/logs");t.exports={logError:function(e){const t=(new Date).toISOString(),n=[{message:e.message||"Error",timestamp:t,data:{hindsight:{timestamp:t,url:r(),agent:i.navigator.userAgent,severity:"error",message:e.message,stack:e.stack}}}];o(n)}}},{"../api-client/logs":16,"./env":63,"./window":81}],65:[function(e,t,n){const{shuffle:i,getRandomInt:r}=e("./random"),{log:o}=e("./logging"),{evaluateConditions:a}=e("./conditions"),{applyOverrideValues:s}=e("./configuration");function l(e){return e.percentage>0&&e.override&&e.id}function c(e){return new Date(e+"T00:00:00")}function d(e){return!1!==e.enabled}function u({startDate:e,endDate:t},n){n=c(n);let i=!0,r=!1;return e&&(i=n>=c(e)),t&&(r=n>=c(t)),i&&!r}function g(e){return!e.conditions||a(e.conditions)}function p(e){return e.percentage>=r(100)}t.exports={isActive:u,applyExperiments:function(e){const t=(new Date).toISOString().substr(0,10);for(const n of i(e.experiments||[])){if([d(n),l(n),u(n,t),g(n),p(n)].every(Boolean))return o(e.id||e.type,"running experiment",n.id),s(e,n.override),n}return null}}},{"./conditions":58,"./configuration":59,"./logging":71,"./random":74}],66:[function(e,t,n){t.exports={once:function(e){return function(e,t){let n;if("function"!=typeof t)throw new TypeError("Expected a function");return function(...i){return--e>0&&(n=t.apply(this,i)),e<=1&&(t=void 0),n}}(2,e)}}},{}],67:[function(e,t,n){t.exports={insertHTMLAndExecuteScripts:function(e,t){const n=e.ownerDocument;e.innerHTML=t,Array.from(e.querySelectorAll("script")).forEach((e=>{const t=n.createElement("script");Array.from(e.attributes).forEach((e=>{t.setAttribute(e.name,e.value)})),t.appendChild(n.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)}))},insertBefore:function(e,t){e.parentNode.insertBefore(t,e)},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)}}},{}],68:[function(e,t,n){const{window:i}=e("./window"),{log:r}=e("./logging"),{toInlineCss:o}=e("./css");function a(e,t){function n(){if(e.complete&&0===e.naturalHeight)for(const t of e.hindsight_callbacks)t(e)}e.hindsight_callbacks=e.hindsight_callbacks||[],e.hindsight_callbacks.push(t),e.onload=n,e.onerror=n}const s={replaceWithURL:function(e,{url:t}){e.src=t},replaceWithSelector:function(e,{selector:t,attribute:n}){let r="";const o=i.document.querySelector(t);if(o){const e=n||"src";r=o[e]||o.getAttribute(e)}e.src=r},replaceWithBlank:function(e){const t=e.height,n=e.ownerDocument,i="http://www.w3.org/2000/svg",r=n.createElementNS(i,"svg");r.setAttribute("height",t),r.setAttribute("width",t);const o=n.createElementNS(i,"rect");o.setAttribute("height",t),o.setAttribute("width",t),o.setAttribute("fill","white"),e.replaceWith(r),r.appendChild(o)}};t.exports={onImageFailed:a,loadImageFallback:function(e,t){if(!e.defaultThumbnailUrl&&!e.thumbnailFallbacks)return;const n=Array.from(e.thumbnailFallbacks||[]);e.defaultThumbnailUrl&&n.push({method:"replaceWithURL",url:e.defaultThumbnailUrl}),n.push({method:"replaceWithBlank"}),a(t,(e=>{!function(e,t){if(r("Applying image fallback",e,t),!e)return r("No more fallback methods available");const n=s[e.method];if(!n)return r("Image fallback method not supported");const i=e.style||{"object-fit":"cover"};t.setAttribute("style",t.style.cssText+o(i,!0)),n(t,e)}(n.shift(),e)}))}}},{"./css":61,"./logging":71,"./window":81}],69:[function(e,t,n){const{window:i}=e("./window");function r(e,t,n,r){const o=e[t];e[t]=function(...t){const a=o.apply(e,t);return setTimeout((()=>{i.dispatchEvent(new Event(n))}),r||0),a}}t.exports={triggerOnArticleLoad:function(e){const t="locationchange";r(i.history,"replaceState",t),r(i.history,"pushState",t,2e3);const n=[i.location.href];i.addEventListener(t,(()=>{const t=i.location.href;n.indexOf(t)>-1||(n.push(t),e())}))}}},{"./window":81}],70:[function(e,t,n){const{window:i,containerWindow:r}=e("./window"),o=["hindsight_loaded","hindsightConfig","hindsight_network"],a=["hindsight_referrer","hindsight_clicktracker","hindsight_fixed_positioning","hindsight_styles"];function s(e){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:i[e]}function l(e){if(o.includes(e))return s(e);console.log("[Hindsight] ERROR",e,"private parameter not supported")}function c(){r.hindsight_loaded=!1;i.document.querySelectorAll("[hindsight_rendered]").forEach((e=>{e.hindsight_rendered=!1,e.removeAttribute("hindsight_rendered")}));const e=i.document.querySelectorAll("[hindsight]");e.forEach((e=>{e.remove()})),console.log(`[Hindsight] removed ${e.length} units`)}t.exports={getPrivateExternalParameter:l,getPublicExternalParameter:function(e){if(a.includes(e))return s(e);console.log("[Hindsight] ERROR",e,"public parameter not supported")},createPublicAPI:function(e){i.hindsight&&i.hindsight.start||(i.hindsight={start:e,remove:c,restart:()=>(i.hindsight.remove(),i.hindsight.start()),destroy(){i.hindsight.remove(),i.hindsight=void 0},cmd:i.hindsight&&i.hindsight.cmd||[]})},libraryHasLoaded:function(){return!!l("hindsight_loaded")||(r.hindsight_loaded=!0,!1)},networkMode:function(){return Boolean(l("hindsight_network"))}}},{"./window":81}],71:[function(e,t,n){const{inAdmin:i,hasFlag:r}=e("./env"),o=console.info||console.log;function a(...e){(r("showlogs")||i())&&o("[Hindsight]",...e)}t.exports={log:a,debug:function(...e){r("debug")&&a("[debug]",...e)}}},{"./env":63}],72:[function(e,t,n){t.exports={toDecimal:function(e,t=2){return 1*Number.parseFloat(e).toFixed(t)}}},{}],73:[function(e,t,n){const{log:i,debug:r}=e("./logging"),o=3,a=["<img","<em>Source:</em>","<table","<h1","<h2","<h3","<twitter","instagram-media","<figcaption","<title"],s={default:{ignoreIncludes:[...a]},in_paragraph_only_ad:{ignoreIncludes:[...a,"Image via","ref_src=twsrc"],ignoreNextElementIncludes:["<DIV","<SCRIPT","<H2","<H1","<H3","<IMG","<TITLE","<FIGCAPTION","<FIGURE","<TWITTER","<EM","<IFRAME","<CANVAS","<SVG","<TABLE","<TWITTER-WIDGET"],ignoreClasses:["parbox","deets"]}};function l(e){return!e||(!d(e)&&!e.innerHTML||!e.textContent.trim())}function c(e,t={}){if(!t.countEmptyElementsAsParagraphs&&l(e))return r(e,"is not a paragraph, it is empty"),!1;let n={};t.turnOffDefaultRules||(n=s[t.type]||s.default);const i=e.outerHTML||e.textContent,o=(n.ignoreIncludes||[]).concat(t.ignoreIncludes||[]);for(const t of o)if(i.toLowerCase().includes(t.toLowerCase()))return r(e,"is not a paragraph, contains",t),!1;if(e.nextElementSibling&&e.nextElementSibling.outerHTML){const i=(n.ignoreNextElementIncludes||[]).concat(t.ignoreNextElementIncludes||[]);for(const t of i)if(e.nextElementSibling.outerHTML.toLowerCase().includes(t.toLowerCase()))return r(e,"is not a paragraph, next element contains",t),!1}const a=(n.ignoreClasses||[]).concat(t.ignoreClasses||[]),c=Array.from(e.classList||[]);for(const t of a)if(c.includes(t))return r(e,"is not a paragraph, has class",t),!1;return!0}function d(e){return e.nodeType===o}t.exports={isParagraph:c,getArticleParagraphs:function(e,t={}){let n=[];const o=t.selector||"div > p, section > p";return"HINDSIGHT:TEXT_NODE"===o&&e.hasChildNodes()?(r("Using custom paragraph selector",o),n=Array.from(e.childNodes).filter(d)):n=Array.from(e.querySelectorAll(o)),n=n.map((e=>(e.valid=!0,e))),t.countEmptyElementsAsParagraphs||(n=n.map((e=>(e.valid=!l(e),e)))),t.countAllElementsAsParagraphs||(n=n.map((e=>(e.valid=c(e,t),e)))),t.selectNextNode&&(n=function(e){return e.filter((e=>e.nextSibling)).map((e=>(e.nextSibling.valid=e.valid,e.nextSibling)))}(n)),i(n.length,"Paragraphs"),r("Paragraphs",n),n},getCharCount:function(e){const t=(e.innerText||e.textContent).replace(/\s+/g,"").length;return r(t,"characters counted in paragraph",e),t},getParagraphsAfterElement:function(e,t){if(!t||!e.length)return e;const n=[],i=t.parentElement.childNodes;let o=!1;for(const r of i)r.isEqualNode(t)?o=!0:o&&e.includes(r)&&n.push(r);return r(n,"paragraphs after startElement"),n},getParagraphsAfterLastUnit:function(e){let t=0;for(let n=0;n<e.length;n+=1)e[n].hindsight_position&&(t=n+1);return e.slice(t)}}},{"./logging":71}],74:[function(e,t,n){function i(e){return e.sort((()=>.5-Math.random()))}t.exports={getRandomInt:function(e){return Math.floor(Math.random()*Math.floor(e))},createGUID:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},shuffle:i,randomPick:function(e){return i(e)[0]}}},{}],75:[function(e,t,n){const{window:i}=e("./window"),{log:r}=e("./logging"),{getArticleId:o}=e("./article"),{getLocalOverride:a}=e("./env"),{networkMode:s}=e("./library-api"),l={publisherId:()=>a("publisherId"),nordotSiteId(){if(!s())return null;const e=i.document.querySelector("meta[property='nordot:contentsholder_unit_id']");return e?e.getAttribute("content"):null},articleDomain:()=>new URL(o()).host};t.exports={getSiteId:function(){for(const e of Object.keys(l)){const t=l[e]();if(t)return r(e,"found site id:",t),t}return null}}},{"./article":56,"./env":63,"./library-api":70,"./logging":71,"./window":81}],76:[function(e,t,n){const{toInlineCss:i}=e("./css"),{log:r}=e("./logging");t.exports={getSiteStyles:function(e,t){try{const{siteWindow:n,siteElement:r}=function(e){let t=e,n=e.ownerDocument.defaultView;for(let e=0;e<2;e+=1)n.frameElement&&(t=n.frameElement,n=t.ownerDocument.defaultView);return{siteWindow:n,siteElement:t}}(t),o=(e.styles||{}).container||{},a={};for(const t of e.inheritSiteStyles)o[t]||(a[t]=n.getComputedStyle(r,null).getPropertyValue(t));let s=null;if(a["font-family"]){a["font-family"]=a["font-family"].replace(/['"]+/g,"");const e=a["font-family"].split(",")[0].split(" ")[0];s=Array.from(n.document.head.querySelectorAll("style,link")).filter((t=>t.outerHTML.includes(e)))[0]}return`\n      <style>div#container {${i(a,!0)}}</style>\n      ${s?s.outerHTML:""}\n    `}catch(e){return r("getSiteStyles error",e),""}}}},{"./css":61,"./logging":71}],77:[function(e,t,n){const{window:i,containerWindow:r}=e("./window"),{log:o}=e("./logging"),{evaluateConditions:a}=e("./conditions");t.exports={onDOMLoaded:function(){return o("Will start on DOM loaded"),new Promise((e=>{r.addEventListener("DOMContentLoaded",(()=>{setTimeout(e,1500)}))}))},onInteraction:function(e,t,n){if(e.start&&e.start.onInteraction){const i=t.querySelector(e.start.onInteraction.elementSelector);if(i)return i.addEventListener(e.start.onInteraction.event,(()=>{o("Start triggered by user interaction"),n()}))}return!1},onDemand:function(e){if(i.hindsight.cmd.length>0)for(let t=1;t<=i.hindsight.cmd.length;t+=1)setTimeout((()=>{o("ON DEMAND start invoked before loading"),e()}),1e3*t);i.hindsight.cmd=[],i.hindsight.cmd.push=()=>{o("ON DEMAND start"),e()}},waitFor:function(e,t,n){const{conditions:i,timeout:r,interval:s}=e.start.waitFor,{paragraphIdentification:l}=e,c={articleBody:t,paragraphIdentification:l};let d=null;const u=setInterval((()=>{o("waiting for conditions",i),a(i,c,e)&&(o("waitFor conditions have been met"),clearInterval(u),clearTimeout(d),n())}),s||20);d=setTimeout((()=>{o("start waitFor timed out"),clearInterval(u),n()}),r||6e4)}}},{"./conditions":58,"./logging":71,"./window":81}],78:[function(e,t,n){t.exports={breakLines:function(e,t,n=44){for(const i of e)(i[t]||"").length>n&&(i[t]=i[t].slice(0,n)+String.fromCharCode(8230));return e}}},{}],79:[function(e,t,n){t.exports={includeAds:function({start:e,every:t,tiles:n,until:i,adsLimit:r=1/0}){let o=0,a=0;return n.reduce(((n,s,l)=>(n.length<i&&n.push(s),!isNaN(e)&&(l===e-1&&n.push("ad"),l<e)||(o+=1,o===t&&n.length<i&&a<r&&(n.push("ad"),o=0,a+=1)),n)),[])}}},{}],80:[function(e,t,n){const{window:i}=e("./window"),{getPublicExternalParameter:r}=e("./library-api");function o(e,t,{margin:n=0}={}){if(!e)return null;if(0===(e=Array.isArray(e)?e:[e]).length)return null;const i=new IntersectionObserver((function(e){const n=e.filter((e=>e.isIntersecting)).length>0;t(n,i)}),{rootMargin:n+"px"});for(const t of e){const e=a(t);e&&i.observe(e)}return i}function a(e){return 3===e.nodeType?e.nextElementSibling||e.previousElementSibling||e.parentElement:"SCRIPT"===e.tagName?e.previousElementSibling&&"SCRIPT"!==e.previousElementSibling.tagName?e.previousElementSibling:e.parentElement:e}t.exports={whenVisible:function(e,t,n){return new Promise((i=>{o(e,((e,t)=>{e&&(n&&n(),i(),t.disconnect())}),t)}))},trackConditionalVisibility:function(e,t){const n=i.document.querySelector(e);n&&o(n,(e=>{(t.style||{}).display=e?"none":"block"}))},trackVisibility:o,trackViewTime:function(e){let t=!1;o(e,((e,n)=>{!t&&e&&(t=!0),t&&!e&&n.disconnect()}))},trackClicks:function(e,t,n){const i=e.querySelectorAll(t);for(const e of i)e.onmousedown=()=>{n(e.href)}},trackPageVisibility:function(e){let t,n;void 0!==i.document.hidden?(t="hidden",n="visibilitychange"):void 0!==i.document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==i.document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),i.document.addEventListener(n,(function(){e(!i.document[t])}),!1)},createClickTracker:function(e){const t=r("hindsight_clicktracker");if(!t||!e)return null;try{return new URL(t).toString()+encodeURIComponent(e)}catch(t){return e}}}},{"./library-api":70,"./window":81}],81:[function(e,t,n){const{inContainer:i}=e("./containers");t.exports={window:i(window)?window:window.parent.parent,containerWindow:window}},{"./containers":60}]},{},[54]);